(function(n){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.WebSharper={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i of Object.getOwnPropertyNames(n))t[i]=n[i];return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},PrintObject:function(n){var t="{ ",i=!0;for(var r of Object.getOwnPropertyNames(n))i?i=!1:t+=", ",t+=r+" = "+n[r];return t+(i?"}":" }")},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return WebSharper.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:WebSharper.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},MarkResizable:function(n){return Object.defineProperty(n,"resizable",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},MarkReadOnly:function(n){return Object.defineProperty(n,"readonly",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.WebSharper.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW;b=a.MidPrjFuji=a.MidPrjFuji||{};c=b.App=b.App||{};d=a.WebSharper=a.WebSharper||{};e=d.Arrays=d.Arrays||{};f=d.Operators=d.Operators||{};g=d.Obj=d.Obj||{};h=d.UI=d.UI||{};i=h.Templating=h.Templating||{};j=i.Runtime=i.Runtime||{};k=j.Server=j.Server||{};l=k.ProviderBuilder=k.ProviderBuilder||{};m=h.TemplateHole=h.TemplateHole||{};n=k.Handler=k.Handler||{};o=h.Var=h.Var||{};p=a.EventTarget;q=a.WindowOrWorkerGlobalScope;r=d.JavaScript=d.JavaScript||{};s=r.JS=r.JS||{};t=d.Charting=d.Charting||{};u=t.Renderers=t.Renderers||{};v=u.ChartJs=u.ChartJs||{};w=t.Chart=t.Chart||{};x=t.Charts=t.Charts||{};y=x.RadarChart=x.RadarChart||{};z=t.Pervasives=t.Pervasives||{};A=z.Color=z.Color||{};B=x.BarChart=x.BarChart||{};C=b.Pages=b.Pages||{};D=h.View=h.View||{};E=k.TemplateInstance=k.TemplateInstance||{};F=h.TemplateHoleModule=h.TemplateHoleModule||{};G=F.Elt=F.Elt||{};H=F.Text=F.Text||{};I=d.Unchecked=d.Unchecked||{};J=a.System=a.System||{};K=J.Guid=J.Guid||{};L=F.EventQ=F.EventQ||{};M=a.StartupCode$MidPrjFuji$Client=a.StartupCode$MidPrjFuji$Client||{};N=u.ChartJsInternal=u.ChartJsInternal||{};O=h.Client=h.Client||{};P=O.Templates=O.Templates||{};Q=h.Doc=h.Doc||{};R=r.Pervasives=r.Pervasives||{};S=x.CompositeChart=x.CompositeChart||{};T=a.Object;U=d.Numeric=d.Numeric||{};V=a.MidPrjFuji_Templates=a.MidPrjFuji_Templates||{};W=a.MidPrjFuji_Router=a.MidPrjFuji_Router||{};X=h.Var$1=h.Var$1||{};Y=h.ListModel=h.ListModel||{};Z=h.Router=h.Router||{};_0=d.Seq=d.Seq||{};_1=a.ADataSet;_2=x.ChartConfig=x.ChartConfig||{};_3=x.SeriesChartConfig=x.SeriesChartConfig||{};_4=a.StartupCode$WebSharper_Charting$Renderers=a.StartupCode$WebSharper_Charting$Renderers||{};_5=a.Node;_6=d.Collections=d.Collections||{};_7=_6.Dictionary=_6.Dictionary||{};_8=x.ColorConfig=x.ColorConfig||{};_9=a.Options;_=d.Control=d.Control||{};$=_.FSharpEvent=_.FSharpEvent||{};ba=a.StartupCode$WebSharper_Charting$Charts=a.StartupCode$WebSharper_Charting$Charts||{};bb=h.Snap=h.Snap||{};bc=h.ConcreteVar=h.ConcreteVar||{};bd=F.TextView=F.TextView||{};be=F.VarStr=F.VarStr||{};bf=h.Docs=h.Docs||{};bg=_6.HashSet=_6.HashSet||{};bh=k.TemplateInitializer=k.TemplateInitializer||{};bi=F.VarFloatUnchecked=F.VarFloatUnchecked||{};bj=F.VarBool=F.VarBool||{};bk=F.VarDateTime=F.VarDateTime||{};bl=F.VarFile=F.VarFile||{};bm=F.VarDomElement=F.VarDomElement||{};bn=d.Sitelets=d.Sitelets||{};bo=bn.RouterOperators=bn.RouterOperators||{};bp=bn.RouterModule=bn.RouterModule||{};bq=bn.Route=bn.Route||{};br=h.HtmlModule=h.HtmlModule||{};bs=br.attr=br.attr||{};bt=h.AttrModule=h.AttrModule||{};bu=a.Element;bv=a.HTMLElement;bw=d.Enumerator=d.Enumerator||{};bx=bw.T=bw.T||{};by=d.Option=d.Option||{};bz=d.Slice=d.Slice||{};bA=N.BatchUpdater=N.BatchUpdater||{};bB=d.Util=d.Util||{};bC=z.Seq=z.Seq||{};bD=t.Reactive=t.Reactive||{};bE=z.Reactive=z.Reactive||{};bF=d.List=d.List||{};bG=bF.T=bF.T||{};bH=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};bI=_.Event=_.Event||{};bJ=bI.Event=bI.Event||{};bK=d.Random=d.Random||{};bL=x.PolarData=x.PolarData||{};bM=h.Abbrev=h.Abbrev||{};bN=bM.Fresh=bM.Fresh||{};bO=_6.DictionaryUtil=_6.DictionaryUtil||{};bP=h.Storage=h.Storage||{};bQ=bn.Router=bn.Router||{};bR=bn.List=bn.List||{};bS=h.AttrProxy=h.AttrProxy||{};bT=h.Attrs=h.Attrs||{};bU=h.DomUtility=h.DomUtility||{};bV=P.Prepare=P.Prepare||{};bW=_6.KeyCollection=_6.KeyCollection||{};bX=h.DocElemNode=h.DocElemNode||{};bY=a.CharacterData;bZ=a.Blob;b0=h.Elt=h.Elt||{};b1=h.An=h.An||{};b2=O.Settings=O.Settings||{};b3=bM.Mailbox=bM.Mailbox||{};b4=bP.ArrayStorage=bP.ArrayStorage||{};b5=_6.FSharpMap=_6.FSharpMap||{};b6=_6.Map=_6.Map||{};b7=d.Strings=d.Strings||{};b8=d.Utils=d.Utils||{};b9=d.Concurrency=d.Concurrency||{};b_=O.Attrs=O.Attrs||{};b$=b_.Dyn=b_.Dyn||{};ca=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};cb=F.Attribute=F.Attribute||{};cc=F.Event=F.Event||{};cd=F.AfterRender=F.AfterRender||{};ce=F.AfterRenderQ=F.AfterRenderQ||{};cf=h.Array=h.Array||{};cg=h.Updates=h.Updates||{};ch=_6.ValueCollection=_6.ValueCollection||{};ci=O.Docs=O.Docs||{};cj=ci.RunState=ci.RunState||{};ck=ci.NodeSet=ci.NodeSet||{};cl=h.Anims=h.Anims||{};cm=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};cn=_6.BalancedTree=_6.BalancedTree||{};co=cn.Tree=cn.Tree||{};cp=_6.Pair=_6.Pair||{};cq=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};cr=d.Queue=d.Queue||{};cs=_6.HashSetUtil=_6.HashSetUtil||{};ct=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};cu=h.AppendList=h.AppendList||{};cv=_6.MapUtil=_6.MapUtil||{};cw=b9.Scheduler=b9.Scheduler||{};cx=bn.PathUtil=bn.PathUtil||{};cy=a.Error;cz=d.KeyNotFoundException=d.KeyNotFoundException||{};cA=h.DynamicAttrNode=h.DynamicAttrNode||{};cB=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};cC=h.Easing=h.Easing||{};cD=b9.AsyncBody=b9.AsyncBody||{};cE=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};cF=b9.CT=b9.CT||{};cG=bM.HashSet=bM.HashSet||{};cH=h.BindVar=h.BindVar||{};cI=h.String=h.String||{};cJ=h.CheckedInput=h.CheckedInput||{};cK=d.CancellationTokenSource=d.CancellationTokenSource||{};cL=ci.DomNodes=ci.DomNodes||{};cM=d.Char=d.Char||{};cN=d.DateUtil=d.DateUtil||{};cO=d.OperationCanceledException=d.OperationCanceledException||{};cP=d.Lazy=d.Lazy||{};cQ=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};cR=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};cS=cR.LazyRecord=cR.LazyRecord||{};cT=a.Math;cU=d&&d.Runtime;cV=a.console;cW=a.Date;c.Main=function(){var cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6;cX=(cY=Q.EmbedView(D.Map(function(c7){return c7.$==1?C.Page1():C.HomePage();},c.currentPage().get_View())),(cZ=(c0=(c1=(c2=new l.New$1(),(c2.h.push(new H.New("url_home","/")),c2)),(c1.h.push(new H.New("url_page1","/#/page1")),c1)),(c0.h.push(n.EventQ2(c0.k,"takemehome",function(){return c0.i;},function(){c.currentPage().Set({$:0});c.month()<6?self.alert("Now, It's still month of  "+a.String(c.month())+" .  so it's a good time to start doing some healthy things!  Let't check at the homepage."):c.month()<10?self.alert("Now, it is month of "+a.String(c.month())+" .  so you still have time to start living a healthier lifestyle!  Let't check at the homepage."):self.alert("Now, it is month of  "+a.String(c.month())+" .  Start living a healthy lifestyle in preparation for next year.!  Let't check at the homepage.");})),c0)),(cZ.h.push(new G.New("maincontainer",cY)),cZ)));c3=n.CompleteHoles(cX.k,cX.h,[]);cX.i=new E.New(c3[1],P.RunFullDocTemplate(c3[0]));c4=v.Render$1(w.Combine([w.Bar$1(e.zip(["Your","John","Paul","Sara","Mery"],[C.counter().Get(),2,3,1,4])).__WithFillColor(new A({$:0,$0:151,$1:187,$2:205,$3:0.2})).__WithStrokeColor(new A({$:2,$0:"blue"}))]),{$:1,$0:{$:0,$0:600,$1:300}},null,null);P.LoadLocalTemplates("");Q.RunAppendById("Chart1",c4);c5=["Eating","Drinking","Sleeping","Designing","Coding","Cycling","Running"];c6=v.Render(w.Combine([w.Radar$1(e.zip(c5,[28,48,40,19,96,27,100])).__WithFillColor(new A({$:0,$0:151,$1:187,$2:205,$3:0.2})).__WithStrokeColor(new A({$:2,$0:"blue"})).__WithPointColor(new A({$:2,$0:"darkblue"})),w.Radar$1(e.zip(c5,[65,59,90,81,56,55,40])).__WithFillColor(new A({$:0,$0:220,$1:220,$2:220,$3:0.2})).__WithStrokeColor(new A({$:2,$0:"green"})).__WithPointColor(new A({$:2,$0:"darkgreen"}))]),{$:1,$0:{$:0,$0:600,$1:400}},null,null);P.LoadLocalTemplates("");Q.RunAppendById("Chart",c6);};c.currentPage=function(){M.$cctor();return M.currentPage;};c.month=function(){M.$cctor();return M.month;};c.router=function(){M.$cctor();return M.router;};e.get=function(cX,cY){e.checkBounds(cX,cY);return cX[cY];};e.checkBounds=function(cX,cY){if(cY<0||cY>=cX.length)f.FailWith("Index was outside the bounds of the array.");};e.set=function(cX,cY,cZ){e.checkBounds(cX,cY);cX[cY]=cZ;};e.length=function(cX){return cX.dims===2?cX.length*cX.length:cX.length;};f.toInt=function(cX){var cY;cY=f.toUInt(cX);return cY>=2147483648?cY-4294967296:cY;};f.FailWith=function(cX){throw new cy(cX);};f.toUInt=function(cX){return(cX<0?cT.ceil(cX):cT.floor(cX))>>>0;};f.range=function(cX,cY){var cZ;cZ=1+cY-cX;return cZ<=0?[]:_0.init(cZ,function(c0){return c0+cX;});};f.KeyValue=function(cX){return[cX.K,cX.V];};g=d.Obj=cU.Class({Equals:function(cX){return this===cX;},GetHashCode:function(){return -1;}},null,g);g.New=cU.Ctor(function(){},g);l=k.ProviderBuilder=cU.Class({},g,l);l.New$1=cU.Ctor(function(){var cX;g.New.call(this);this.i=null;this.k=(cX=K.NewGuid(),a.String(cX));this.h=cU.MarkResizable([]);cU.SetOptional(this,"s",null);},l);m=h.TemplateHole=cU.Class({ForTextView:function(){cV.warn("Content hole filled with attribute data",this.get_Name());return null;},AddAttribute:function(cX,cY){cV.warn("Var hole filled with non-Var data",this.get_Name());},get_AsChoiceView:function(){cV.warn("Attribute value hole filled with non-text data",this.get_Name());return{$:0,$0:""};}},g,m);m.New=cU.Ctor(function(){g.New.call(this);},m);n.EventQ2=function(cX,cY,cZ,c0){return new L.New(cY,function(c1){return function(c2){var c3;c3=cZ();c3.SetAnchorRoot(c1);return c0({Vars:c3,Anchors:c3,Target:c1,Event:c2});};});};n.CompleteHoles=function(cX,cY,cZ){var c1,c2,c3,c4,c5;function c0(c6,c7,c8){var c9;return c2.Contains(c6)?null:(c9=I.Equals(c7,0)?bh.GetOrAddHoleFor(cX,c6,function(){return new be.New(c6,X.Create$1(""));}):I.Equals(c7,1)?bh.GetOrAddHoleFor(cX,c6,function(){return new bi.New(c6,X.Create$1(0));}):I.Equals(c7,2)?bh.GetOrAddHoleFor(cX,c6,function(){return new bj.New(c6,X.Create$1(false));}):I.Equals(c7,3)?bh.GetOrAddHoleFor(cX,c6,function(){return new bk.New(c6,X.Create$1(-8640000000000000));}):I.Equals(c7,4)?bh.GetOrAddHoleFor(cX,c6,function(){return new bl.New(c6,X.Create$1([]));}):I.Equals(c7,5)?bh.GetOrAddHoleFor(cX,c6,function(){var c_;c_=self.document.querySelector("[ws-dom="+c6+"]");c_.removeAttribute("ws-dom");return new bm.New(c6,X.Create$1({$:1,$0:c_}));}):f.FailWith("Invalid value type"),(c1.set_Item(c6,c9),{$:1,$0:c9}));}c1=new _7.New$5();c2=new bg.New$3();c3=bw.Get(cY);try{while(c3.MoveNext()){c4=c3.Current();c5=c4.get_Name();c2.SAdd(c5);c1.set_Item(c5,c4);}}finally{if(typeof c3=="object"&&"Dispose"in c3)c3.Dispose();}return[_0.append(cY,e.choose(function(c6){return c0(c6[0],c6[1],c6[2]);},cZ)),{$:0,$0:c1}];};o=h.Var=cU.Class({},g,o);o.New=cU.Ctor(function(){g.New.call(this);},o);s.GetFieldValues=function(cX){var cY,cZ;cY=[];for(var c0 in cX)cY.push(cX[c0]);return cY;};v.Render$1=function(cX,cY,cZ,c0){var c1;return N.RenderCombinedBarChart(cX,(c1=u.defaultSize(),cY==null?c1:cY.$0),cZ,c0);};v.Render=function(cX,cY,cZ,c0){var c1;return N.RenderCombinedRadarChart(cX,(c1=u.defaultSize(),cY==null?c1:cY.$0),cZ,c0);};w.Combine=function(cX){return new S.New(cX);};w.Radar$1=function(cX){return new y.New({$:0,$0:cX},x.defaultChartConfig(),x.defaultSeriesChartConfig(),x.defaultColorConfig());};w.Bar$1=function(cX){return new B.New({$:0,$0:cX},x.defaultChartConfig(),x.defaultSeriesChartConfig());};y=x.RadarChart=cU.Class({__WithPointColor:function(cX){return this.WebSharper_Charting_Charts_IColorChart_1$WithPointColor(cX);},__WithStrokeColor:function(cX){return this.WebSharper_Charting_Charts_ISeriesChart_1$WithStrokeColor(cX);},__WithFillColor:function(cX){return this.WebSharper_Charting_Charts_ISeriesChart_1$WithFillColor(cX);},get__Config:function(){return this.WebSharper_Charting_Charts_IChart_1$get_Config();},get__SeriesConfig:function(){return this.WebSharper_Charting_Charts_ISeriesChart_1$get_SeriesConfig();},get__ColorConfig:function(){return this.WebSharper_Charting_Charts_IColorChart_1$get_ColorConfig();},get_DataSet:function(){return this.dataset;},WebSharper_Charting_Charts_IColorChart_1$WithPointColor:function(cX){var cY;return new y.New(this.dataset,this.cfg,this.scfg,(cY=this.ccfg,_8.New(cX,cY.PointHighlightFill,cY.PointHighlightStroke,cY.PointStrokeColor)));},WebSharper_Charting_Charts_ISeriesChart_1$WithStrokeColor:function(cX){var cY;return new y.New(this.dataset,this.cfg,(cY=this.scfg,_3.New(cY.XAxis,cY.YAxis,cY.FillColor,cX,cY.IsFilled)),this.ccfg);},WebSharper_Charting_Charts_ISeriesChart_1$WithFillColor:function(cX){var cY;return new y.New(this.dataset,this.cfg,(cY=this.scfg,_3.New(cY.XAxis,cY.YAxis,cX,cY.StrokeColor,cY.IsFilled)),this.ccfg);},WebSharper_Charting_Charts_IChart_1$get_Config:function(){return this.cfg;},WebSharper_Charting_Charts_ISeriesChart_1$get_SeriesConfig:function(){return this.scfg;},WebSharper_Charting_Charts_IMutableChart_2$OnUpdate:function(cX){this.event.event.Subscribe(bB.observer(cX));},WebSharper_Charting_Charts_IColorChart_1$get_ColorConfig:function(){return this.ccfg;}},g,y);y.New=cU.Ctor(function(cX,cY,cZ,c0){g.New.call(this);this.dataset=cX;this.cfg=cY;this.scfg=cZ;this.ccfg=c0;this.event=new $.New();},y);e.zip=function(cX,cY){var cZ,c0,c1;e.checkLength(cX,cY);cZ=e.create(cX.length,null);for(c0=0,c1=cX.length-1;c0<=c1;c0++)cZ[c0]=[cX[c0],cY[c0]];return cZ;};e.checkLength=function(cX,cY){if(cX.length!==cY.length)f.FailWith("The arrays have different lengths.");};e.map=function(cX,cY){var cZ,c0,c1;cZ=new a.Array(cY.length);for(c0=0,c1=cY.length-1;c0<=c1;c0++)cZ[c0]=cX(cY[c0]);return cZ;};e.iter=function(cX,cY){var cZ,c0;for(cZ=0,c0=cY.length-1;cZ<=c0;cZ++)cX(cY[cZ]);};e.iteri=function(cX,cY){var cZ,c0;for(cZ=0,c0=cY.length-1;cZ<=c0;cZ++)cX(cZ,cY[cZ]);};e.create=function(cX,cY){var cZ,c0,c1;cZ=new a.Array(cX);for(c0=0,c1=cX-1;c0<=c1;c0++)cZ[c0]=cY;return cZ;};e.choose=function(cX,cY){var cZ,c0,c1,c2;cZ=[];for(c0=0,c1=cY.length-1;c0<=c1;c0++){c2=cX(cY[c0]);if(c2==null);else cZ.push(c2.$0);}return cZ;};e.ofSeq=function(cX){var cY,cZ;if(cX instanceof a.Array)return cX.slice();else if(cX instanceof bG)return e.ofList(cX);else{cY=[];cZ=bw.Get(cX);try{while(cZ.MoveNext())cY.push(cZ.Current());return cY;}finally{if(typeof cZ=="object"&&"Dispose"in cZ)cZ.Dispose();}}};e.tryFindIndex=function(cX,cY){var cZ,c0;cZ=null;c0=0;while(c0<cY.length&&cZ==null){cX(cY[c0])?cZ={$:1,$0:c0}:void 0;c0=c0+1;}return cZ;};e.ofList=function(cX){var cY,cZ;cZ=[];cY=cX;while(!(cY.$==0)){cZ.push(bF.head(cY));cY=bF.tail(cY);}return cZ;};e.map2=function(cX,cY,cZ){var c0,c1,c2;e.checkLength(cY,cZ);c0=new a.Array(cZ.length);for(c1=0,c2=cZ.length-1;c1<=c2;c1++)c0[c1]=cX(cY[c1],cZ[c1]);return c0;};e.forall=function(cX,cY){var cZ,c0,c1,c2;cZ=true;c0=0;c2=e.length(cY);while(cZ&&c0<c2)if(cX(cY[c0]))c0=c0+1;else cZ=false;return cZ;};e.init=function(cX,cY){var cZ,c0,c1;if(cX<0)f.FailWith("Negative size given.");else null;cZ=new a.Array(cX);for(c0=0,c1=cX-1;c0<=c1;c0++)cZ[c0]=cY(c0);return cZ;};e.exists=function(cX,cY){var cZ,c0,c1,c2;cZ=false;c0=0;c2=e.length(cY);while(!cZ&&c0<c2)if(cX(cY[c0]))cZ=true;else c0=c0+1;return cZ;};e.tryPick=function(cX,cY){var cZ,c0,c1;cZ=null;c0=0;while(c0<cY.length&&cZ==null){c1=cX(cY[c0]);if(c1!=null&&c1.$==1)cZ=c1;c0=c0+1;}return cZ;};e.filter=function(cX,cY){var cZ,c0,c1;cZ=[];for(c0=0,c1=cY.length-1;c0<=c1;c0++)if(cX(cY[c0]))cZ.push(cY[c0]);return cZ;};e.concat=function(cX){return a.Array.prototype.concat.apply([],e.ofSeq(cX));};e.foldBack=function(cX,cY,cZ){var c0,c1,c2,c3,c4;c0=cZ;c2=cY.length;for(c3=1,c4=c2;c3<=c4;c3++)c0=cX(cY[c2-c3],c0);return c0;};e.pick=function(cX,cY){var cZ;cZ=e.tryPick(cX,cY);return cZ==null?f.FailWith("KeyNotFoundException"):cZ.$0;};e.sortInPlace=function(cX){e.mapInPlace(function(cY){return cY[0];},e.mapiInPlace(function(cY,cZ){return[cZ,cY];},cX).sort(I.Compare));};A=z.Color=cU.Class({toString:function(){return this.$==1?this.$0:this.$==2?this.$0:"rgba("+a.String(this.$0)+", "+a.String(this.$1)+", "+a.String(this.$2)+", "+this.$3.toFixed(6)+")";}},null,A);B=x.BarChart=cU.Class({__WithStrokeColor:function(cX){return this.cst(this).WebSharper_Charting_Charts_ISeriesChart_1$WithStrokeColor(cX);},__WithFillColor:function(cX){return this.cst(this).WebSharper_Charting_Charts_ISeriesChart_1$WithFillColor(cX);},cst:a.id,get__Config:function(){return this.cst(this).WebSharper_Charting_Charts_IChart_1$get_Config();},get__SeriesConfig:function(){return this.cst(this).WebSharper_Charting_Charts_ISeriesChart_1$get_SeriesConfig();},get_DataSet:function(){return this.dataset;},WebSharper_Charting_Charts_ISeriesChart_1$WithStrokeColor:function(cX){var cY;return new B.New(this.dataset,this.cfg,(cY=this.scfg,_3.New(cY.XAxis,cY.YAxis,cY.FillColor,cX,cY.IsFilled)));},WebSharper_Charting_Charts_ISeriesChart_1$WithFillColor:function(cX){var cY;return new B.New(this.dataset,this.cfg,(cY=this.scfg,_3.New(cY.XAxis,cY.YAxis,cX,cY.StrokeColor,cY.IsFilled)));},WebSharper_Charting_Charts_IChart_1$get_Config:function(){return this.cfg;},WebSharper_Charting_Charts_ISeriesChart_1$get_SeriesConfig:function(){return this.scfg;},WebSharper_Charting_Charts_IMutableChart_2$OnUpdate:function(cX){this.event.event.Subscribe(bB.observer(cX));}},g,B);B.New=cU.Ctor(function(cX,cY,cZ){g.New.call(this);this.dataset=cX;this.cfg=cY;this.scfg=cZ;this.event=new $.New();},B);C.counter=function(){M.$cctor();return M.counter;};C.Page1=function(){var cX,cY,cZ;return(cX=new l.New$1(),(cY=n.CompleteHoles(cX.k,cX.h,[]),(cZ=new E.New(cY[1],V.page1(cY[0])),cX.i=cZ,cZ))).get_Doc();};C.HomePage=function(){var cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj;function dk(dl,dm,dn,_do){var dp,dq,dr,ds,dt,du,dv;return(dp=(dq=(dr=(ds=(dt=new l.New$1(),(dt.h.push(new H.New("name",dl)),dt)),(ds.h.push(new H.New("height",dm)),ds)),(dr.h.push(new H.New("weight",dn)),dr)),(dq.h.push(new H.New("bmi",_do)),dq)),(du=n.CompleteHoles(dp.k,dp.h,[]),(dv=new E.New(du[1],V.listitem(du[0])),dp.i=dv,dv))).get_Doc();}cX=X.Create$1("");cY=X.Create$1("");cZ=X.Create$1("");c0=X.Create$1(0);c1=X.Create$1("");return(c2=(c3=a.String((new a.Date(C.now())).getFullYear())+"/"+a.String((new a.Date(C.now())).getMonth()+1)+"/"+a.String((new a.Date(C.now())).getDate()),(c4=(c5=D.Map(a.String,C.counter().get_View()),(c6=(c7=(c8=D.Map(a.String,c1.get_View()),(c9=(c_=D.Map(a.String,C.healthData().get_View()),(c$=(da=(db=(dc=(dd=(de=Q.Convert(function(dl){return dk(dl[0],dl[1],dl[2],dl[3]);},C.People().v),(df=(dg=(dh=new l.New$1(),(dh.h.push(n.EventQ2(dh.k,"decrement",function(){return dh.i;},function(){C.counter().Set(C.counter().Get()-1);C.strage().setItem("counter",a.String(C.counter().Get()));})),dh)),(dg.h.push(n.EventQ2(dg.k,"increment",function(){return dg.i;},function(){C.counter().Set(C.counter().Get()+1);C.strage().setItem("counter",a.String(C.counter().Get()));})),dg)),(df.h.push(new G.New("listcontainer",de)),df))),(dd.h.push(new be.New("name",cX)),dd)),(dc.h.push(new be.New("height",cY)),dc)),(db.h.push(new be.New("weight",cZ)),db)),(da.h.push(n.EventQ2(da.k,"add",function(){return da.i;},function(){var dl;dl=a.Number(cY.Get())/100;c0.Set(f.toInt(a.Number(cZ.Get())/(dl*dl)));C.People().Append([cX.Get(),cY.Get(),cZ.Get(),a.String(c0.Get())]);C.healthData().Set("["+cX.Get()+"'s HEALTH-DATA]    HEIGHT:  "+cY.Get()+"cm  / WEIGHT:  "+cZ.Get()+"kg  / BMI:  "+a.String(c0.Get())+".");C.str().setItem(cX.Get(),C.healthData().Get());if(C.counter().Get()>=3&&c0.Get()<=25)c1.Set("+++ GOOD HEALTH");else C.counter().Get()<3&&c0.Get()<=25?c1.Set("++ NORMAL HEALTH"):C.counter().Get()>=3&&c0.Get()>20?c1.Set("++ NORMAL HEALTH"):c1.Set("+ NOT HEALTHY");cX.Set("");cY.Set("");cZ.Set("");})),da)),(c$.h.push(new bd.New("result",c_)),c$))),(c9.h.push(new bd.New("eval",c8)),c9))),(c7.h.push(n.EventQ2(c7.k,"clear",function(){return c7.i;},function(){C.counter().Set(0);})),c7)),(c6.h.push(new bd.New("value",c5)),c6))),(c4.h.push(new H.New("checkdate",c3)),c4))),(di=n.CompleteHoles(c2.k,c2.h,[["name",0,null],["height",0,null],["weight",0,null]]),(dj=new E.New(di[1],V.homepage(di[0])),c2.i=dj,dj))).get_Doc();};C.strage=function(){M.$cctor();return M.strage;};C.People=function(){M.$cctor();return M.People;};C.healthData=function(){M.$cctor();return M.healthData;};C.str=function(){M.$cctor();return M.str;};C.now=function(){M.$cctor();return M.now;};D=h.View=cU.Class({},null,D);E=k.TemplateInstance=cU.Class({SetAnchorRoot:function(cX){this.anchorRoot=cX;},get_Doc:function(){return this.doc;}},g,E);E.New=cU.Ctor(function(cX,cY){g.New.call(this);this.doc=cY;this.allVars=cX.$==0?cX.$0:f.FailWith("Should not happen");this.anchorRoot=null;},E);G=F.Elt=cU.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},m,G);G.New=cU.Ctor(function(cX,cY){m.New.call(this);this.name=cX;this.fillWith=cY;},G);H=F.Text=cU.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;},get_AsChoiceView:function(){return{$:0,$0:this.fillWith};}},m,H);H.New=cU.Ctor(function(cX,cY){m.New.call(this);this.name=cX;this.fillWith=cY;},H);I.Equals=function(cX,cY){var cZ,c0,c1,c2;if(cX===cY)return true;else{cZ=typeof cX;if(cZ=="object"){if(cX===null||cX===void 0||cY===null||cY===void 0||!I.Equals(typeof cY,"object"))return false;else if("Equals"in cX)return cX.Equals(cY);else if("Equals"in cY)return false;else if(cX instanceof a.Array&&cY instanceof a.Array)return I.arrayEquals(cX,cY);else if(cX instanceof a.Date&&cY instanceof a.Date)return I.dateEquals(cX,cY);else{c0=[true];for(var c3 in cX)if(function(c4){c0[0]=!cX.hasOwnProperty(c4)||cY.hasOwnProperty(c4)&&I.Equals(cX[c4],cY[c4]);return!c0[0];}(c3))break;if(c0[0]){for(var c4 in cY)if(function(c5){c0[0]=!cY.hasOwnProperty(c5)||cX.hasOwnProperty(c5);return!c0[0];}(c4))break;}return c0[0];}}else return cZ=="function"&&("$Func"in cX?cX.$Func===cY.$Func&&cX.$Target===cY.$Target:"$Invokes"in cX&&"$Invokes"in cY&&I.arrayEquals(cX.$Invokes,cY.$Invokes));}};I.Compare=function(cX,cY){var cZ,c0,c1,c2,c3,c4;if(cX===cY)return 0;else{c0=typeof cX;switch(c0=="function"?1:c0=="boolean"?2:c0=="number"?2:c0=="string"?2:c0=="object"?3:0){case 0:return typeof cY=="undefined"?0:-1;case 1:return f.FailWith("Cannot compare function values.");case 2:return cX<cY?-1:1;case 3:if(cX===null)c1=-1;else if(cY===null)c1=1;else if("CompareTo"in cX)c1=cX.CompareTo(cY);else if("CompareTo0"in cX)c1=cX.CompareTo0(cY);else if(cX instanceof a.Array&&cY instanceof a.Array)c1=I.compareArrays(cX,cY);else if(cX instanceof a.Date&&cY instanceof a.Date)c1=I.compareDates(cX,cY);else{c2=[0];for(var c5 in cX)if(function(c6){return!cX.hasOwnProperty(c6)?false:!cY.hasOwnProperty(c6)?(c2[0]=1,true):(c2[0]=I.Compare(cX[c6],cY[c6]),c2[0]!==0);}(c5))break;if(c2[0]===0){for(var c6 in cY)if(function(c7){return!cY.hasOwnProperty(c7)?false:!cX.hasOwnProperty(c7)&&(c2[0]=-1,true);}(c6))break;}c1=c2[0];}return c1;}}};I.arrayEquals=function(cX,cY){var cZ,c0;if(e.length(cX)===e.length(cY)){cZ=true;c0=0;while(cZ&&c0<e.length(cX)){!I.Equals(e.get(cX,c0),e.get(cY,c0))?cZ=false:void 0;c0=c0+1;}return cZ;}else return false;};I.dateEquals=function(cX,cY){return cX.getTime()===cY.getTime();};I.compareArrays=function(cX,cY){var cZ,c0;if(e.length(cX)<e.length(cY))return -1;else if(e.length(cX)>e.length(cY))return 1;else{cZ=0;c0=0;while(cZ===0&&c0<e.length(cX)){cZ=I.Compare(e.get(cX,c0),e.get(cY,c0));c0=c0+1;}return cZ;}};I.compareDates=function(cX,cY){return I.Compare(cX.getTime(),cY.getTime());};I.Hash=function(cX){var cY;cY=typeof cX;return cY=="function"?0:cY=="boolean"?cX?1:0:cY=="number"?cX:cY=="string"?I.hashString(cX):cY=="object"?cX==null?0:cX instanceof a.Array?I.hashArray(cX):I.hashObject(cX):0;};I.hashString=function(cX){var cY,cZ,c0;if(cX===null)return 0;else{cY=5381;for(cZ=0,c0=cX.length-1;cZ<=c0;cZ++)cY=I.hashMix(cY,cX[cZ].charCodeAt());return cY;}};I.hashArray=function(cX){var cY,cZ,c0;cY=-34948909;for(cZ=0,c0=e.length(cX)-1;cZ<=c0;cZ++)cY=I.hashMix(cY,I.Hash(e.get(cX,cZ)));return cY;};I.hashObject=function(cX){var cY,cZ;if("GetHashCode"in cX)return cX.GetHashCode();else{cY=[0];for(var c0 in cX)if(function(c1){cY[0]=I.hashMix(I.hashMix(cY[0],I.hashString(c1)),I.Hash(cX[c1]));return false;}(c0))break;return cY[0];}};I.hashMix=function(cX,cY){return(cX<<5)+cX+cY;};K.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(cX){var cY,cZ;cY=cT.random()*16|0;cZ=cX=="x"?cY:cY&3|8;return cZ.toString(16);});};L=F.EventQ=cU.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},m,L);L.New=cU.Ctor(function(cX,cY){m.New.call(this);this.name=cX;this.fillWith=cY;},L);M.$cctor=function(){var cX;M.$cctor=a.ignore;M.now=cW.now();M.People=Y.FromSeq([["John","170","60","20"],["Paul","180","50","15"],["Sara","160","50","19"],["Mery","170","60","20"]]);M.str=self.localStorage;M.healthData=X.Create$1("");M.strage=self.localStorage;M.counter=(cX=C.strage().getItem("counter"),X.Create$1(cX==""?0:f.toInt(a.Number(cX))));M.router=W.r();M.currentPage=Z.InstallHash({$:0},c.router());M.state=0;M.month=(new cW(cW.now())).getMonth()+1;};N.RenderCombinedBarChart=function(cX,cY,cZ,c0){return N.withNewCanvas(cY,function(c1){var c2,c3,c4,c5,c6;c2=(c3=_0.choose(function(c7){var c8;c8=c7.get_DataSet();return c8.$==1?null:{$:1,$0:_0.map(function(c9){return c9[0];},c8.$0)};},cX.get_Charts()),_0.length(c3)>0?_0.maxBy(_0.length,c3):[]);c4=(c5={},c5.datasets=e.ofSeq(_0.map(function(c7){var c8,c9;c8=N.mkInitial(c7.get_DataSet(),c0);c9={type:"bar"};c9.label=c7.get__Config().Title;c9.backgroundColor=a.String(c7.get__SeriesConfig().FillColor);c9.borderColor=a.String(c7.get__SeriesConfig().StrokeColor);c9.data=e.map(function(c_){return c_[1];},c8);return c9;},cX.get_Charts())),c5);c4.labels=e.ofSeq(c2);c6=new a.Chart(c1,{data:c4,options:cZ==null?{}:cZ.$0});_0.iteri(function(c7,c8){return N.registerUpdater(c8,function(c9,c_){var c$;c$=e.get(c6.data.datasets,c7).data;c$[c9]=c_(e.get(c$,c9));},function(){c6.update();});},cX.get_Charts());return N.onCombinedEvent(N.extractStreams(_0.map(function(c7){return c7.get_DataSet();},cX.get_Charts())),_0.length(cX.get_Charts()),c0,function(){var c7,c8,c9;c7=c6.data;c8=c7.datasets;c9=c7.labels;e.iter(function(c_){c_.data.shift();},c8);c9.shift();return c6.update();},function(c7,c8){var c9,c_,c$,da;c9=c8[0];c_=c6.data;c$=c_.datasets;da=c_.labels;e.iteri(function(db,dc){var dd;dd=dc.data;return dd[e.length(dd)]=e.get(c9,db);},c$);da[e.length(da)]=c8[1];return c6.update();});});};N.RenderCombinedRadarChart=function(cX,cY,cZ,c0){return N.withNewCanvas(cY,function(c1){var c2,c3,c4,c5,c6;c2=(c3=_0.choose(function(c7){var c8;c8=c7.get_DataSet();return c8.$==1?null:{$:1,$0:_0.map(function(c9){return c9[0];},c8.$0)};},cX.get_Charts()),_0.length(c3)>0?_0.maxBy(_0.length,c3):[]);c4=(c5={},c5.datasets=e.ofSeq(_0.map(function(c7){var c8,c9;c8=N.mkInitial(c7.get_DataSet(),c0);c9={type:"radar"};c9.label=c7.get__Config().Title;c9.fill=c7.get__SeriesConfig().IsFilled;c9.backgroundColor=a.String(c7.get__SeriesConfig().FillColor);c9.borderColor=a.String(c7.get__SeriesConfig().StrokeColor);c9.pointBackgroundColor=a.String(c7.get__ColorConfig().PointColor);c9.pointHoverBackgroundColor=a.String(c7.get__ColorConfig().PointHighlightFill);c9.pointHoverBorderColor=a.String(c7.get__ColorConfig().PointHighlightStroke);c9.pointBorderColor=a.String(c7.get__ColorConfig().PointStrokeColor);c9.data=e.map(function(c_){return c_[1];},c8);return c9;},cX.get_Charts())),c5);c4.labels=e.ofSeq(c2);c6=new a.Chart(c1,{data:c4,options:cZ==null?{}:cZ.$0});_0.iteri(function(c7,c8){return N.registerUpdater(c8,function(c9,c_){var c$;c$=e.get(c6.data.datasets,c7).data;c$[c9]=c_(e.get(c$,c9));},function(){c6.update();});},cX.get_Charts());return N.onCombinedEvent(N.extractStreams(_0.map(function(c7){return c7.get_DataSet();},cX.get_Charts())),_0.length(cX.get_Charts()),c0,function(){var c7,c8,c9;c7=c6.data;c8=c7.datasets;c9=c7.labels;e.iter(function(c_){c_.data.shift();},c8);c9.shift();return c6.update();},function(c7,c8){var c9,c_,c$,da;c9=c8[0];c_=c6.data;c$=c_.datasets;da=c_.labels;e.iteri(function(db,dc){var dd;dd=dc.data;return dd[e.length(dd)]=e.get(c9,db);},c$);da[e.length(da)]=c8[1];return c6.update();});});};N.withNewCanvas=function(cX,cY){var cZ,c0;cZ=cX.$0;c0=cX.$1;return Q.Element("div",[bS.Create("width",a.String(cZ)),bS.Create("height",a.String(c0)),bt.Style("width",a.String(cZ)+"px"),bt.Style("height",a.String(c0)+"px")],[Q.Element("canvas",[bt.OnAfterRender(function(c1){var c2;c2=c1.getContext("2d");c1.width=cZ;c1.height=c0;cY(c1,c2);})],[])]);};N.mkInitial=function(cX,cY){return cX.$==0?by.fold(function(cZ,c0){var c1;c1=e.length(cZ)-c0;return c1>=e.length(cZ)?[]:c1<=0?cZ:bz.array(cZ,{$:1,$0:c1},null);},e.ofSeq(cX.$0),cY):[];};N.registerUpdater=function(cX,cY,cZ){var c0;function c1(c2,c3){cY(c2,c3);c0.Update(cZ);}c0=new bA.New(null,null);cX.WebSharper_Charting_Charts_IMutableChart_2$OnUpdate(function(c2){return c1(c2[0],c2[1]);});};N.onCombinedEvent=function(cX,cY,cZ,c0,c1){var c2;c2=[0];cX.Subscribe(bB.observer(function(c3){var c4,c5,c6,c7,c8;function c9(c_,c$){e.set(c5,c_,c$[1]);}if(cZ==null);else{c4=cZ.$0;c2[0]>=c4?c0(c4,c2[0]):void 0;}c5=e.ofSeq(_0.delay(function(){return _0.map(function(){return 0;},f.range(1,cY));}));_0.iter(function(c_){return c9(c_[0],c_[1]);},c3);c6=bC.headOption(c3);if(c6==null);else{c7=c6.$0;c7[0];c8=c7[1];c1(c2[0],[c5,c8[0]]);}c2[0]++;}));};N.extractStreams=function(cX){return bE.SequenceOnlyNew(_0.choose(a.id,_0.mapi(function(cY,cZ){return cZ.$==0?null:{$:1,$0:bD.Select(cZ.$0,function(c0){return[cY,c0];})};},cX)));};u.defaultSize=function(){_4.$cctor();return _4.defaultSize;};P.LoadLocalTemplates=function(cX){!P.LocalTemplatesLoaded()?(P.set_LocalTemplatesLoaded(true),P.LoadNestedTemplates(self.document.body,"")):void 0;P.LoadedTemplates().set_Item(cX,P.LoadedTemplateFile(""));};P.LocalTemplatesLoaded=function(){bH.$cctor();return bH.LocalTemplatesLoaded;};P.set_LocalTemplatesLoaded=function(cX){bH.$cctor();bH.LocalTemplatesLoaded=cX;};P.LoadNestedTemplates=function(cX,cY){var c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di;function cZ(dj){var dk,dl;if(!c0.ContainsKey(dj)){dk=(dl=null,[c1.TryGetValue(dj,{get:function(){return dl;},set:function(dm){dl=dm;}}),dl]);if(dk[0]){di.SAdd(dj);c1.RemoveKey(dj);P.PrepareTemplateStrict(cY,{$:1,$0:dj},dk[1],{$:1,$0:cZ});}else cV.warn(di.Contains(dj)?"Encountered loop when instantiating "+dj:"Local template does not exist: "+dj);}}c0=P.LoadedTemplateFile(cY);c1=new _7.New$5();c2=cX.querySelectorAll("[ws-template]");for(c3=0,c4=c2.length-1;c3<=c4;c3++){c5=c2[c3];c6=c5.getAttribute("ws-template").toLowerCase();c5.removeAttribute("ws-template");c1.set_Item(c6,P.FakeRootSingle(c5));}c7=cX.querySelectorAll("[ws-children-template]");for(c8=0,c9=c7.length-1;c8<=c9;c8++){c_=c7[c8];c$=c_.getAttribute("ws-children-template").toLowerCase();c_.removeAttribute("ws-children-template");c1.set_Item(c$,P.FakeRoot(c_));}da=cX.querySelectorAll("template[id]");for(db=0,dc=da.length-1;db<=dc;db++){dd=da[db];c1.set_Item(dd.getAttribute("id").toLowerCase(),P.FakeRootFromHTMLTemplate(dd));}de=cX.querySelectorAll("template[name]");for(df=0,dg=de.length-1;df<=dg;df++){dh=de[df];c1.set_Item(dh.getAttribute("name").toLowerCase(),P.FakeRootFromHTMLTemplate(dh));}di=new bg.New$3();while(c1.count>0)cZ(_0.head(c1.Keys()));};P.LoadedTemplates=function(){bH.$cctor();return bH.LoadedTemplates;};P.LoadedTemplateFile=function(cX){var cY,cZ,c0;cY=(cZ=null,[P.LoadedTemplates().TryGetValue(cX,{get:function(){return cZ;},set:function(c1){cZ=c1;}}),cZ]);return cY[0]?cY[1]:(c0=new _7.New$5(),(P.LoadedTemplates().set_Item(cX,c0),c0));};P.RunFullDocTemplate=function(cX){var cY,cZ,c0;return P.RenderedFullDocTemplate()==null?(cY=(P.LoadLocalTemplates(""),P.PrepareTemplateStrict("",null,self.document.body,null),cZ=P.ChildrenTemplate(self.document.body,cX),c0=self.document.body,function(c1){Q.RunInPlace(true,c0,c1);}(cZ),cZ),(P.set_RenderedFullDocTemplate({$:1,$0:cY}),cY)):P.RenderedFullDocTemplate().$0;};P.FakeRootSingle=function(cX){var cY,cZ,c0,c1;cX.removeAttribute("ws-template");cY=cX.getAttribute("ws-replace");if(cY==null);else{cX.removeAttribute("ws-replace");cZ=cX.parentNode;I.Equals(cZ,null)?void 0:(c0=self.document.createElement(cX.tagName),c0.setAttribute("ws-replace",cY),cZ.replaceChild(c0,cX));}c1=self.document.createElement("div");c1.appendChild(cX);return c1;};P.FakeRoot=function(cX){var cY;cY=self.document.createElement("div");while(cX.hasChildNodes())cY.appendChild(cX.firstChild);return cY;};P.FakeRootFromHTMLTemplate=function(cX){var cY,cZ,c0,c1;cY=self.document.createElement("div");cZ=cX.content;for(c0=0,c1=cZ.childNodes.length-1;c0<=c1;c0++)cY.appendChild(cZ.childNodes[c0].cloneNode(true));return cY;};P.PrepareTemplateStrict=function(cX,cY,cZ,c0){var c1,c2;function c3(c9,c_){var c$,da,db,dc,dd,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz;function de(dA){}while(true)switch(c9){case 0:if(c_!==null){c$=c_.nextSibling;if(I.Equals(c_.nodeType,_5.TEXT_NODE))bV.convertTextNode(c_);else if(I.Equals(c_.nodeType,_5.ELEMENT_NODE))c5(c_);c_=c$;}else return null;break;case 1:df=bz.string(c_.nodeName,{$:1,$0:3},null).toLowerCase();dg=(da=df.indexOf("."),da===-1?[cX,df]:[bz.string(df,null,{$:1,$0:da-1}),bz.string(df,{$:1,$0:da+1},null)]);dh=dg[1];di=dg[0];if(di!=""&&!P.LoadedTemplates().ContainsKey(di))return bV.failNotLoaded(dh);else{if(di==""&&c0!=null)c0.$0(dh);dj=P.LoadedTemplates().Item(di);if(!dj.ContainsKey(dh))return bV.failNotLoaded(dh);else{dk=dj.Item(dh);dl=dk.cloneNode(true);dm=new bg.New$3();dn=new _7.New$5();_do=c_.attributes;for(dp=0,dq=_do.length-1;dp<=dq;dp++){dr=_do.item(dp).name.toLowerCase();dn.set_Item(dr,(ds=_do.item(dp).nodeValue,ds==""?dr:ds.toLowerCase()));if(!dm.SAdd(dr))cV.warn("Hole mapped twice",dr);}for(dt=0,du=c_.childNodes.length-1;dt<=du;dt++){dv=c_.childNodes[dt];if(I.Equals(dv.nodeType,_5.ELEMENT_NODE))!dm.SAdd(dv.nodeName.toLowerCase())?cV.warn("Hole filled twice",dh):void 0;}dw=c_.childNodes.length===1&&I.Equals(c_.firstChild.nodeType,_5.TEXT_NODE);if(dw){dc=bV.fillTextHole(dl,c_.firstChild.textContent,dh);((function(dA){return function(dB){if(dB!=null)dA(dB.$0);};}((dd=function(dA){return function(dB){return dA.SAdd(dB);};}(dm),function(dA){return de(dd(dA));})))(dc));}bV.removeHolesExcept(dl,dm);if(!dw){for(dx=0,dy=c_.childNodes.length-1;dx<=dy;dx++){dz=c_.childNodes[dx];if(I.Equals(dz.nodeType,_5.ELEMENT_NODE))dz.hasAttributes()?bV.fillInstanceAttrs(dl,dz):c4(dl,dz);}}bV.mapHoles(dl,dn);bV.fill(dl,c_.parentNode,c_);c_.parentNode.removeChild(c_);return;}}break;}}function c4(c9,c_){var c$,da,dc,dd;function db(de,df){var dg;if(dc=="title"&&c_.hasChildNodes()){dg=bU.ParseHTMLIntoFakeRoot(c_.textContent);c_.removeChild(c_.firstChild);while(dg.hasChildNodes())c_.appendChild(dg.firstChild);}else null;c5(c_);return bV.fill(c_,de,df);}dc=c_.nodeName.toLowerCase();P.foreachNotPreserved(c9,"[ws-attr-holes]",function(de){var df,dg,dh,di,dj;df=b7.SplitChars(de.getAttribute("ws-attr-holes"),[" "],1);for(dg=0,dh=df.length-1;dg<=dh;dg++){di=e.get(df,dg);de.setAttribute(di,(dj=new a.RegExp("\\${"+dc+"}","ig"),de.getAttribute(di).replace(dj,c_.textContent)));}});dd=c9.querySelector("[ws-hole="+dc+"]");if(I.Equals(dd,null)){c$=c9.querySelector("[ws-replace="+dc+"]");return I.Equals(c$,null)?(da=c9.querySelector("slot[name="+dc+"]"),c9.tagName.toLowerCase()=="template"?(db(da.parentNode,da),void da.parentNode.removeChild(da)):null):(db(c$.parentNode,c$),void c$.parentNode.removeChild(c$));}else{while(dd.hasChildNodes())dd.removeChild(dd.lastChild);dd.removeAttribute("ws-hole");return db(dd,null);}}function c5(c9){if(!c9.hasAttribute("ws-preserve"))if(b7.StartsWith(c9.nodeName.toLowerCase(),"ws-"))c7(c9);else{bV.convertAttrs(c9);c6(c9.firstChild);}}function c6(c9){return c3(0,c9);}function c7(c9){return c3(1,c9);}function c8(c9){var c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj;while(true){c_=c9.querySelector("[ws-template]");if(I.Equals(c_,null)){c$=c9.querySelector("[ws-children-template]");if(I.Equals(c$,null)){da=c9.querySelectorAll("template[id]");for(db=1,dc=da.length-1;db<=dc;db++){dd=da[db];if(c1.Contains(dd));else{P.PrepareTemplateStrict(cX,{$:1,$0:dd.getAttribute("id")},dd,null);c1.SAdd(dd);}}de=c9.querySelectorAll("template[name]");for(df=1,dg=de.length-1;df<=dg;df++){dh=de[df];if(c1.Contains(dh));else{P.PrepareTemplateStrict(cX,{$:1,$0:dh.getAttribute("name")},dh,null);c1.SAdd(dh);}}return null;}else{di=c$.getAttribute("ws-children-template");c$.removeAttribute("ws-children-template");P.PrepareTemplateStrict(cX,{$:1,$0:di},c$,null);c9=c9;}}else{dj=c_.getAttribute("ws-template");(P.PrepareSingleTemplate(cX,{$:1,$0:dj},c_))(null);c9=c9;}}}c1=new bg.New$3();c2=(cY==null?"":cY.$0).toLowerCase();P.LoadedTemplateFile(cX).set_Item(c2,cZ);if(cZ.hasChildNodes()){c8(cZ);c6(cZ.firstChild);}};P.NamedTemplate=function(cX,cY,cZ){var c0,c1;c0=(c1=null,[P.LoadedTemplateFile(cX).TryGetValue(cY==null?"":cY.$0,{get:function(){return c1;},set:function(c2){c1=c2;}}),c1]);return c0[0]?P.ChildrenTemplate(c0[1].cloneNode(true),cZ):(cV.warn("Local template doesn't exist",cY),Q.get_Empty());};P.RenderedFullDocTemplate=function(){bH.$cctor();return bH.RenderedFullDocTemplate;};P.ChildrenTemplate=function(cX,cY){var cZ,c0,c1,c2,c3;cZ=P.InlineTemplate(cX,_0.append(cY,P.GlobalHoles().Values()));c0=cZ[1];c1=cZ[0];c2=c1.Els;return!I.Equals(c2,null)&&c2.length===1&&(e.get(c2,0)instanceof _5&&(I.Equals(e.get(c2,0).nodeType,_5.ELEMENT_NODE)&&(c3=e.get(c2,0),true)))?b0.TreeNode(c1,c0):Q.Mk({$:6,$0:c1},c0);};P.set_RenderedFullDocTemplate=function(cX){bH.$cctor();bH.RenderedFullDocTemplate=cX;};P.foreachNotPreserved=function(cX,cY,cZ){bU.IterSelector(cX,cY,function(c0){if(c0.closest("[ws-preserve]")==null)cZ(c0);});};P.PrepareSingleTemplate=function(cX,cY,cZ){var c0;c0=P.FakeRootSingle(cZ);return function(c1){P.PrepareTemplateStrict(cX,cY,c0,c1);};};P.InlineTemplate=function(cX,cY){var cZ,c0,c1,c2,c3,c7,c8,c9,c_,c$,da,db;function c4(dc,dd){var de,df,dg;de=bT.Insert(dc,dd);c8.push(bT.Updates(de));c9.push([dc,de]);df=cU.GetOptional(de.OnAfterRender);return df==null?null:(dg=df.$0,void c_.push(function(){dg(dc);}));}function c5(dc){var dd,de,df,dg;dd=(de=null,[c$.TryGetValue(dc,{get:function(){return de;},set:function(dh){de=dh;}}),de]);return dd[0]?(df=dd[1],df instanceof G?{$:1,$0:df.get_Value()}:df instanceof H?{$:1,$0:Q.TextNode(df.get_Value())}:(dg=df.ForTextView(),dg==null?null:{$:1,$0:Q.TextView(dg.$0)})):null;}function c6(){P.foreachNotPreservedwsDOM("[ws-dom]",function(dc){var dd,de,df,dg,dh,di,dj;dd=(de=null,[c$.TryGetValue(dc.getAttribute("ws-dom").toLowerCase(),{get:function(){return de;},set:function(dk){de=dk;}}),de]);if(dd[0]){df=dd[1];df instanceof bm?(dg=df.get_Value(),dc.removeAttribute("ws-dom"),dh=dc,di=new a.MutationObserver(function(dk,dl){e.iter(function(dm){function dn(_do,dp,dq,dr){if(_do===dh&&dm.addedNodes.length!==1){dg.SetFinal(null);dl.disconnect();}}dm.removedNodes.forEach(cU.CreateFuncWithArgs(function(_do){return dn(_do[0],_do[1],_do[2],_do[3]);}),null);},dk);}),dc.parentElement!==null?di.observe(dc.parentElement,(dj={},dj.childList=true,dj)):void 0,dg.Set({$:1,$0:dc}),D.Sink(function(dk){var dl;if(dk!=null&&dk.$==1){dl=dk.$0;if(dh===dl);else{dh.replaceWith.apply(dh,[dl]);dh=dl;}}else{dh.remove();di.disconnect();}},dg.get_View())):void 0;}});}c7=[];c8=[];c9=[];c_=[];c$=new _7.New$5();da=bw.Get(cY);try{while(da.MoveNext()){db=da.Current();c$.set_Item(db.get_Name(),db);}}finally{if(typeof da=="object"&&"Dispose"in da)da.Dispose();}cZ=bU.ChildrenArray(cX);P.foreachNotPreserved(cX,"[ws-hole]",function(dc){var dd,de,df;df=dc.getAttribute("ws-hole");dc.removeAttribute("ws-hole");while(dc.hasChildNodes())dc.removeChild(dc.lastChild);dd=c5(df);if(dd!=null&&dd.$==1){de=dd.$0;bf.LinkElement(dc,de.docNode);c7.push(bX.New(bT.Empty(dc),de.docNode,null,dc,bN.Int(),null));c8.push(de.updates);}});P.foreachNotPreserved(cX,"[ws-replace]",function(dc){var dd,de,df,dg,dh,di;dd=c5(dc.getAttribute("ws-replace"));if(dd!=null&&dd.$==1){de=dd.$0;df=dc.parentNode;dg=self.document.createTextNode("");df.replaceChild(dg,dc);dh=bf.InsertBeforeDelim(dg,de.docNode);di=e.tryFindIndex(function(dj){return dc===dj;},cZ);di==null?void 0:e.set(cZ,di.$0,de.docNode);c7.push(bX.New(bT.Empty(df),de.docNode,{$:1,$0:[dh,dg]},df,bN.Int(),null));c8.push(de.updates);}});c0=false;P.foreachNotPreserved(cX,"slot",function(dc){var dd,de,df,dg;df=dc.getAttribute("name");dg=df==""||df==null?"default":df.toLowerCase();if(c0&&dg=="default"||!I.Equals(cX.parentElement,null))void 0;else{while(dc.hasChildNodes())dc.removeChild(dc.lastChild);if(dg=="default")c0=true;dd=c5(dg);if(dd!=null&&dd.$==1){de=dd.$0;bf.LinkElement(dc,de.docNode);c7.push(bX.New(bT.Empty(dc),de.docNode,null,dc,bN.Int(),null));c8.push(de.updates);}}});P.foreachNotPreserved(cX,"[ws-attr]",function(dc){var dd,de,df,dg;dd=dc.getAttribute("ws-attr");dc.removeAttribute("ws-attr");de=(df=null,[c$.TryGetValue(dd,{get:function(){return df;},set:function(dh){df=dh;}}),df]);if(de[0]){dg=de[1];dg instanceof cb?c4(dc,dg.get_Value()):cV.warn("Attribute hole filled with non-attribute data",dd);}});P.foreachNotPreserved(cX,"[ws-on]",function(dc){c4(dc,bS.Concat(e.choose(function(dd){var de,df,dg,dh;de=b7.SplitChars(dd,[":"],1);df=(dg=null,[c$.TryGetValue(e.get(de,1),{get:function(){return dg;},set:function(di){dg=di;}}),dg]);return df[0]?(dh=df[1],dh instanceof cc?{$:1,$0:bt.Handler(e.get(de,0),dh.get_Value())}:dh instanceof L?{$:1,$0:bS.Handler(e.get(de,0),dh.get_Value())}:(cV.warn("Event hole on"+e.get(de,0)+" filled with non-event data",e.get(de,1)),null)):null;},b7.SplitChars(dc.getAttribute("ws-on"),[" "],1))));dc.removeAttribute("ws-on");});P.foreachNotPreserved(cX,"[ws-onafterrender]",function(dc){var dd,de,df,dg;dd=dc.getAttribute("ws-onafterrender");de=(df=null,[c$.TryGetValue(dd,{get:function(){return df;},set:function(dh){df=dh;}}),df]);if(de[0]){dg=de[1];dg instanceof cd?(dc.removeAttribute("ws-onafterrender"),c4(dc,bt.OnAfterRender(dg.get_Value()))):dg instanceof ce?(dc.removeAttribute("ws-onafterrender"),c4(dc,bt.OnAfterRender(dg.get_Value()))):cV.warn("onafterrender hole filled with non-onafterrender data",dd);}});P.foreachNotPreserved(cX,"[ws-var]",function(dc){var dd,de,df;dd=dc.getAttribute("ws-var");dc.removeAttribute("ws-var");de=(df=null,[c$.TryGetValue(dd,{get:function(){return df;},set:function(dg){df=dg;}}),df]);if(de[0])de[1].AddAttribute(function(dg){return function(dh){return c4(dg,dh);};},dc);});P.foreachNotPreserved(cX,"[ws-attr-holes]",function(dc){var dd,de,df,dg;dd=new a.RegExp(P.TextHoleRE(),"g");de=b7.SplitChars(dc.getAttribute("ws-attr-holes"),[" "],1);dc.removeAttribute("ws-attr-holes");for(df=0,dg=de.length-1;df<=dg;df++)(function(){var dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt;dq=e.get(de,df);dr=dc.getAttribute(dq);dh=null;di=0;ds=[];while(dh=dd.exec(dr),dh!==null){dt=bz.string(dr,{$:1,$0:di},{$:1,$0:dd.lastIndex-e.get(dh,0).length-1});di=dd.lastIndex;ds.push([dt,e.get(dh,1)]);}dk=bz.string(dr,{$:1,$0:di},null);dd.lastIndex=0;dl=e.foldBack(function(du,dv){return(function(dw){var dx,dy;dx=dw[0];dy=dw[1];return function(dz){var dA,dB,dC,dD,dE;dA=dz[0];dB=dz[1];dC=(dD=(dE=null,[c$.TryGetValue(dy,{get:function(){return dE;},set:function(dF){dE=dF;}}),dE]),dD[0]?dD[1].get_AsChoiceView():{$:0,$0:""});return dC.$==1?[dx,new bG({$:1,$0:dA==""?dC.$0:D.Map(function(dF){return dF+dA;},dC.$0),$1:dB})]:[dx+dC.$0+dA,dB];};}(du))(dv);},ds,[dk,bG.Empty]);return c4(dc,dl[1].$==1?dl[1].$1.$==1?dl[1].$1.$1.$==1?dl[1].$1.$1.$1.$==0?(dm=dl[0],bt.Dynamic(dq,D.Map3(function(du,dv,dw){return dm+du+dv+dw;},dl[1].$0,dl[1].$1.$0,dl[1].$1.$1.$0))):(dn=dl[0],bt.Dynamic(dq,D.Map(function(du){return dn+b7.concat("",du);},D.Sequence(dl[1])))):(_do=dl[0],bt.Dynamic(dq,D.Map2(function(du,dv){return _do+du+dv;},dl[1].$0,dl[1].$1.$0))):dl[0]==""?bt.Dynamic(dq,dl[1].$0):(dp=dl[0],bt.Dynamic(dq,D.Map(function(du){return dp+du;},dl[1].$0))):bS.Create(dq,dl[0]));}());});return[cU.DeleteEmptyFields({Els:cZ,Dirty:true,Holes:c7,Attrs:c9,Render:(c1=c_.length==0?{$:1,$0:function(){c6();}}:{$:1,$0:function(dc){c6();e.iter(function(dd){dd(dc);},c_);}},c1?c1.$0:void 0),El:(c2=!I.Equals(cZ,null)&&cZ.length===1&&(e.get(cZ,0)instanceof _5&&(e.get(cZ,0)instanceof bu&&(c3=e.get(cZ,0),true)))?{$:1,$0:c3}:null,c2?c2.$0:void 0)},["Render","El"]),cf.TreeReduce(D.Const(),D.Map2Unit,c8)];};P.GlobalHoles=function(){bH.$cctor();return bH.GlobalHoles;};P.TextHoleRE=function(){bH.$cctor();return bH.TextHoleRE;};P.foreachNotPreservedwsDOM=function(cX,cY){bU.IterSelectorDoc(cX,function(cZ){if(cZ.closest("[ws-preserve]")==null)cY(cZ);});};Q=h.Doc=cU.Class({},g,Q);Q.RunAppendById=function(cX,cY){var cZ;cZ=self.document.getElementById(cX);if(I.Equals(cZ,null))f.FailWith("invalid id: "+cX);else Q.RunAppend(cZ,cY);};Q.EmbedView=function(cX){var cY;cY=bf.CreateEmbedNode();return Q.Mk({$:2,$0:cY},D.Map(a.ignore,D.Bind(function(cZ){bf.UpdateEmbedNode(cY,cZ.docNode);return cZ.updates;},cX)));};Q.RunAppend=function(cX,cY){var cZ;cZ=self.document.createTextNode("");cX.appendChild(cZ);Q.RunBefore(cZ,cY);};Q.Mk=function(cX,cY){return new Q.New(cX,cY);};Q.RunBefore=function(cX,cY){var cZ;cZ=self.document.createTextNode("");cX.parentNode.insertBefore(cZ,cX);Q.RunBetween(cZ,cX,cY);};Q.Convert=function(cX,cY){return Q.Flatten(D.MapSeqCached(cX,cY));};Q.RunInPlace=function(cX,cY,cZ){var c0;c0=bf.CreateRunState(cY,cZ.docNode);D.Sink(b1.get_UseAnimations()||b2.BatchUpdatesEnabled()?b3.StartProcessor(bf.PerformAnimatedUpdate(cX,c0,cZ.docNode)):function(){bf.PerformSyncUpdate(cX,c0,cZ.docNode);},cZ.updates);};Q.RunBetween=function(cX,cY,cZ){var c0;bf.LinkPrevElement(cY,cZ.docNode);c0=bf.CreateDelimitedRunState(cX,cY,cZ.docNode);D.Sink(b1.get_UseAnimations()||b2.BatchUpdatesEnabled()?b3.StartProcessor(bf.PerformAnimatedUpdate(false,c0,cZ.docNode)):function(){bf.PerformSyncUpdate(false,c0,cZ.docNode);},cZ.updates);};Q.get_Empty=function(){return Q.Mk(null,D.Const());};Q.Flatten=function(cX){return Q.EmbedView(D.Map(Q.Concat,cX));};Q.Element=function(cX,cY,cZ){var c0,c1;c0=bS.Concat(cY);c1=Q.Concat(cZ);return b0.New(self.document.createElement(cX),c0,c1);};Q.Concat=function(cX){var cY;cY=cf.ofSeqNonCopying(cX);return cf.TreeReduce(Q.get_Empty(),Q.Append,cY);};Q.TextNode=function(cX){return Q.Mk({$:5,$0:self.document.createTextNode(cX)},D.Const());};Q.TextView=function(cX){var cY;cY=bf.CreateTextNode();return Q.Mk({$:4,$0:cY},D.Map(function(cZ){bf.UpdateTextNode(cY,cZ);},cX));};Q.Append=function(cX,cY){return Q.Mk({$:0,$0:cX.docNode,$1:cY.docNode},D.Map2Unit(cX.updates,cY.updates));};Q.New=cU.Ctor(function(cX,cY){g.New.call(this);this.docNode=cX;this.updates=cY;},Q);R.NewFromSeq=function(cX){var cY,cZ,c0;cY={};cZ=bw.Get(cX);try{while(cZ.MoveNext()){c0=cZ.Current();cY[c0[0]]=c0[1];}}finally{if(typeof cZ=="object"&&"Dispose"in cZ)cZ.Dispose();}return cY;};S=x.CompositeChart=cU.Class({get_Charts:function(){return this.charts;}},g,S);S.New=cU.Ctor(function(cX){g.New.call(this);this.charts=cX;},S);x.defaultChartConfig=function(){ba.$cctor();return ba.defaultChartConfig;};x.defaultSeriesChartConfig=function(){ba.$cctor();return ba.defaultSeriesChartConfig;};x.defaultColorConfig=function(){ba.$cctor();return ba.defaultColorConfig;};U.TryParseInt32=function(cX,cY){return U.TryParse(cX,-2147483648,2147483647,cY);};D.Map=function(cX,cY){return D.CreateLazy(function(){return bb.Map(cX,cY());});};D.CreateLazy=function(cX){var cY;cY={c:null,o:cX};return function(){var cZ,c0;cZ=cY.c;return cZ===null?(cZ=cY.o(),cY.c=cZ,(c0=cZ.s,c0!=null&&c0.$==0)?cY.o=null:bb.WhenObsoleteRun(cZ,function(){cY.c=null;}),cZ):cZ;};};D.Bind=function(cX,cY){return D.Join(D.Map(cX,cY));};D.Join=function(cX){return D.CreateLazy(function(){return bb.Join(cX());});};D.Sink=function(cX,cY){function cZ(){bb.WhenRun(cY(),cX,function(){b9.scheduler().Fork(cZ);});}b9.scheduler().Fork(cZ);};D.MapSeqCached=function(cX,cY){return D.MapSeqCachedBy(a.id,cX,cY);};D.Const=function(cX){var cY;cY=bb.New({$:0,$0:cX});return function(){return cY;};};D.MapSeqCachedBy=function(cX,cY,cZ){var c0;c0=[new _7.New$5()];return D.Map(function(c1){var c2,c3,c4;c2=c0[0];c3=new _7.New$5();c4=cf.mapInPlace(function(c5){var c6,c7;c6=cX(c5);c7=c2.ContainsKey(c6)?c2.Item(c6):cY(c5);c3.set_Item(c6,c7);return c7;},e.ofSeq(c1));c0[0]=c3;return c4;},cZ);};D.Map3=function(cX,cY,cZ,c0){return D.CreateLazy(function(){return bb.Map3(cX,cY(),cZ(),c0());});};D.Sequence=function(cX){return D.CreateLazy(function(){return bb.Sequence(_0.map(function(cY){return cY();},cX));});};D.Map2=function(cX,cY,cZ){return D.CreateLazy(function(){return bb.Map2(cX,cY(),cZ());});};D.Map2Unit=function(cX,cY){return D.CreateLazy(function(){return bb.Map2Unit(cX(),cY());});};V.page1=function(cX){P.LoadLocalTemplates("index");return cX?P.NamedTemplate("index",{$:1,$0:"page1"},cX):void 0;};V.listitem=function(cX){P.LoadLocalTemplates("index");return cX?P.NamedTemplate("index",{$:1,$0:"listitem"},cX):void 0;};V.homepage=function(cX){P.LoadLocalTemplates("index");return cX?P.NamedTemplate("index",{$:1,$0:"homepage"},cX):void 0;};W.r=function(){return bo.JSUnion(void 0,[[null,[[null,[]]],[]],[null,[[null,["page1"]]],[]]]);};X=h.Var$1=cU.Class({},g,X);X.Create$1=function(cX){return new bc.New(false,bb.New({$:2,$0:cX,$1:[]}),cX);};Y=h.ListModel=cU.Class({Append:function(cX){var cY,cZ,c0,c1;cY=this;cZ=this["var"].Get();c0=this.key(cX);c1=e.tryFindIndex(function(c2){return I.Equals(cY.key(c2),c0);},cZ);if(c1!=null&&c1.$==1)this["var"].Set(this.storage.SSetAt(c1.$0,cX,cZ));else this["var"].Set(this.storage.SAppend(cX,cZ));this.ObsoleteKey(c0);},ObsoleteKey:function(cX){var cY,cZ;cY=(cZ=null,[this.it.TryGetValue(cX,{get:function(){return cZ;},set:function(c0){cZ=c0;}}),cZ]);if(cY[0]){bb.Obsolete(cY[1]);this.it.RemoveKey(cX);}},GetEnumerator:function(){return bw.Get(this["var"].Get());},GetEnumerator0:function(){return bw.Get0(this["var"].Get());}},g,Y);Y.New=cU.Ctor(function(cX,cY){Y.New$3.call(this,cX,X.Create$1(e.ofSeq(_0.distinctBy(cX,cY.SInit()))),cY);},Y);Y.New$3=cU.Ctor(function(cX,cY,cZ){g.New.call(this);this.key=cX;this["var"]=cY;this.storage=cZ;this.v=D.Map(function(c0){return c0.slice();},this["var"].get_View());this.it=new _7.New$5();},Y);Y.FromSeq=function(cX){return Y.Create(a.id,cX);};Y.Create=function(cX,cY){return Y.CreateWithStorage(cX,bP.InMemory(e.ofSeq(cY)));};Y.CreateWithStorage=function(cX,cY){return new Y.New(cX,cY);};Z.InstallHash=function(cX,cY){var cZ;cZ=X.Create$1(void 0);Z.InstallHashInto(cZ,cX,cY);return cZ;};Z.InstallHashInto=function(cX,cY,cZ){function c0(c3){return bp.Parse(cZ,bq.FromHash(c3,{$:1,$0:true}));}function c1(){return Z.getCurrentHash(c0,cY);}function c2(c3){if(!I.Equals(cX.Get(),c3))cX.Set(c3);}c2(c1());self.addEventListener("popstate",function(){return c2(c1());},false);self.addEventListener("hashchange",function(){return c2(c1());},false);self.document.body.addEventListener("click",function(c3){var c4,c5,c6;c4=(c5=Z.findLinkHref(c3.target),c5==null?null:(c6=c5.$0,b7.StartsWith(c6,"#")?c0(c6):null));return c4==null?null:(c2(c4.$0),c3.preventDefault());},false);D.Sink(function(c3){var c4;if(!I.Equals(c3,c1())){c4=bp.HashLink(cZ,c3);self.history.pushState(null,null,c4);}},cX.get_View());};Z.getCurrentHash=function(cX,cY){var cZ,c0;cZ=self.location.hash;c0=cX(cZ);return c0==null?((function(c1){return function(c2){return c1("Failed to parse route: "+b8.toSafe(c2));};}(function(c1){cV.log(c1);}))(cZ),cY):c0.$0;};Z.findLinkHref=function(cX){while(true)if(cX.tagName=="A")return by.ofObj(cX.getAttribute("href"));else if(cX===self.document.body)return null;else cX=cX.parentNode;};_0.map=function(cX,cY){return{GetEnumerator:function(){var cZ;cZ=bw.Get(cY);return new bx.New(null,null,function(c0){return cZ.MoveNext()&&(c0.c=cX(cZ.Current()),true);},function(){cZ.Dispose();});}};};_0.iteri=function(cX,cY){var cZ,c0;cZ=0;c0=bw.Get(cY);try{while(c0.MoveNext()){cX(cZ,c0.Current());cZ=cZ+1;}}finally{if(typeof c0=="object"&&"Dispose"in c0)c0.Dispose();}};_0.length=function(cX){var cY,cZ;cY=0;cZ=bw.Get(cX);try{while(cZ.MoveNext())cY=cY+1;return cY;}finally{if(typeof cZ=="object"&&"Dispose"in cZ)cZ.Dispose();}};_0.choose=function(cX,cY){return _0.collect(function(cZ){var c0;c0=cX(cZ);return c0==null?bG.Empty:bF.ofArray([c0.$0]);},cY);};_0.maxBy=function(cX,cY){var cZ,c0,c1,c2,c3;cZ=bw.Get(cY);try{if(!cZ.MoveNext())_0.seqEmpty();c0=cZ.Current();c1=cX(c0);while(cZ.MoveNext()){c2=cZ.Current();c3=cX(c2);if(I.Compare(c3,c1)===1){c0=c2;c1=c3;}}return c0;}finally{if(typeof cZ=="object"&&"Dispose"in cZ)cZ.Dispose();}};_0.append=function(cX,cY){return{GetEnumerator:function(){var cZ,c0;cZ=bw.Get(cX);c0=[true];return new bx.New(cZ,null,function(c1){var c2;return c1.s.MoveNext()?(c1.c=c1.s.Current(),true):(c2=c1.s,!I.Equals(c2,null)?c2.Dispose():void 0,c1.s=null,c0[0]&&(c0[0]=false,c1.s=bw.Get(cY),c1.s.MoveNext()?(c1.c=c1.s.Current(),true):(c1.s.Dispose(),c1.s=null,false)));},function(c1){var c2;c2=c1.s;if(!I.Equals(c2,null))c2.Dispose();});}};};_0.delay=function(cX){return{GetEnumerator:function(){return bw.Get(cX());}};};_0.iter=function(cX,cY){var cZ;cZ=bw.Get(cY);try{while(cZ.MoveNext())cX(cZ.Current());}finally{if(typeof cZ=="object"&&"Dispose"in cZ)cZ.Dispose();}};_0.mapi=function(cX,cY){return _0.map2(cX,_0.initInfinite(a.id),cY);};_0.collect=function(cX,cY){return _0.concat(_0.map(cX,cY));};_0.seqEmpty=function(){return f.FailWith("The input sequence was empty.");};_0.head=function(cX){var cY;cY=bw.Get(cX);try{return cY.MoveNext()?cY.Current():_0.insufficient();}finally{if(typeof cY=="object"&&"Dispose"in cY)cY.Dispose();}};_0.indexed=function(cX){return _0.mapi(function(cY,cZ){return[cY,cZ];},cX);};_0.tryFindIndex=function(cX,cY){var cZ,c0,c1;cZ=bw.Get(cY);try{c0=true;c1=0;while(c0&&cZ.MoveNext())if(cX(cZ.Current()))c0=false;else c1=c1+1;return c0?null:{$:1,$0:c1};}finally{if(typeof cZ=="object"&&"Dispose"in cZ)cZ.Dispose();}};_0.tryPick=function(cX,cY){var cZ,c0;cZ=bw.Get(cY);try{c0=null;while(I.Equals(c0,null)&&cZ.MoveNext())c0=cX(cZ.Current());return c0;}finally{if(typeof cZ=="object"&&"Dispose"in cZ)cZ.Dispose();}};_0.init=function(cX,cY){return _0.take(cX,_0.initInfinite(cY));};_0.isEmpty=function(cX){var cY;cY=bw.Get(cX);try{return!cY.MoveNext();}finally{if(typeof cY=="object"&&"Dispose"in cY)cY.Dispose();}};_0.map2=function(cX,cY,cZ){return{GetEnumerator:function(){var c0,c1;c0=bw.Get(cY);c1=bw.Get(cZ);return new bx.New(null,null,function(c2){return c0.MoveNext()&&c1.MoveNext()&&(c2.c=cX(c0.Current(),c1.Current()),true);},function(){c0.Dispose();c1.Dispose();});}};};_0.initInfinite=function(cX){return{GetEnumerator:function(){return new bx.New(0,null,function(cY){cY.c=cX(cY.s);cY.s=cY.s+1;return true;},void 0);}};};_0.concat=function(cX){return{GetEnumerator:function(){var cY;function cZ(c0){var c1;while(true){c1=c0.s;if(I.Equals(c1,null)){if(cY.MoveNext()){c0.s=bw.Get(cY.Current());c0=c0;}else{cY.Dispose();return false;}}else if(c1.MoveNext()){c0.c=c1.Current();return true;}else{c0.Dispose();c0.s=null;c0=c0;}}}cY=bw.Get(cX);return new bx.New(null,null,cZ,function(c0){var c1;c1=c0.s;if(!I.Equals(c1,null))c1.Dispose();if(!I.Equals(cY,null))cY.Dispose();});}};};_0.take=function(cX,cY){cX<0?_0.nonNegative():void 0;return{GetEnumerator:function(){var cZ;cZ=[bw.Get(cY)];return new bx.New(0,null,function(c0){var c1;c0.s=c0.s+1;return c0.s>cX?false:(c1=cZ[0],I.Equals(c1,null)?_0.insufficient():c1.MoveNext()?(c0.c=c1.Current(),c0.s===cX?(c1.Dispose(),cZ[0]=null):void 0,true):(c1.Dispose(),cZ[0]=null,_0.insufficient()));},function(){var c0;c0=cZ[0];if(!I.Equals(c0,null))c0.Dispose();});}};};_0.nth=function(cX,cY){var cZ,c0;if(cX<0)f.FailWith("negative index requested");cZ=-1;c0=bw.Get(cY);try{while(cZ<cX){!c0.MoveNext()?_0.insufficient():void 0;cZ=cZ+1;}return c0.Current();}finally{if(typeof c0=="object"&&"Dispose"in c0)c0.Dispose();}};_0.fold=function(cX,cY,cZ){var c0,c1;c0=cY;c1=bw.Get(cZ);try{while(c1.MoveNext())c0=cX(c0,c1.Current());return c0;}finally{if(typeof c1=="object"&&"Dispose"in c1)c1.Dispose();}};_0.distinctBy=function(cX,cY){return{GetEnumerator:function(){var cZ,c0;cZ=bw.Get(cY);c0=new bg.New$3();return new bx.New(null,null,function(c1){var c2,c3;if(cZ.MoveNext()){c2=cZ.Current();c3=c0.SAdd(cX(c2));while(!c3&&cZ.MoveNext()){c2=cZ.Current();c3=c0.SAdd(cX(c2));}return c3&&(c1.c=c2,true);}else return false;},function(){cZ.Dispose();});}};};_0.compareWith=function(cX,cY,cZ){var c0,c1,c2,c3,c4;c0=bw.Get(cY);try{c2=bw.Get(cZ);try{c3=0;c4=true;while(c4&&c3===0)if(c0.MoveNext())c3=c2.MoveNext()?cX(c0.Current(),c2.Current()):1;else if(c2.MoveNext())c3=-1;else c4=false;c1=c3;}finally{if(typeof c2=="object"&&"Dispose"in c2)c2.Dispose();}return c1;}finally{if(typeof c0=="object"&&"Dispose"in c0)c0.Dispose();}};_0.forall2=function(cX,cY,cZ){return!_0.exists2(function(c0,c1){return!cX(c0,c1);},cY,cZ);};_0.exists2=function(cX,cY,cZ){var c0,c1,c2,c3;c0=bw.Get(cY);try{c2=bw.Get(cZ);try{c3=false;while(!c3&&c0.MoveNext()&&c2.MoveNext())c3=cX(c0.Current(),c2.Current());c1=c3;}finally{if(typeof c2=="object"&&"Dispose"in c2)c2.Dispose();}return c1;}finally{if(typeof c0=="object"&&"Dispose"in c0)c0.Dispose();}};_0.rev=function(cX){return _0.delay(function(){return e.ofSeq(cX).slice().reverse();});};_0.max=function(cX){var cY,cZ,c0;cY=bw.Get(cX);try{if(!cY.MoveNext())_0.seqEmpty();cZ=cY.Current();while(cY.MoveNext()){c0=cY.Current();if(I.Compare(c0,cZ)===1)cZ=c0;}return cZ;}finally{if(typeof cY=="object"&&"Dispose"in cY)cY.Dispose();}};_0.distinct=function(cX){return _0.distinctBy(a.id,cX);};_0.unfold=function(cX,cY){return{GetEnumerator:function(){return new bx.New(cY,null,function(cZ){var c0;c0=cX(cZ.s);return c0==null?false:(cZ.c=c0.$0[0],cZ.s=c0.$0[1],true);},void 0);}};};_0.forall=function(cX,cY){return!_0.exists(function(cZ){return!cX(cZ);},cY);};_0.exists=function(cX,cY){var cZ,c0;cZ=bw.Get(cY);try{c0=false;while(!c0&&cZ.MoveNext())c0=cX(cZ.Current());return c0;}finally{if(typeof cZ=="object"&&"Dispose"in cZ)cZ.Dispose();}};_2.New=function(cX){return{Title:cX};};_3.New=function(cX,cY,cZ,c0,c1){return{XAxis:cX,YAxis:cY,FillColor:cZ,StrokeColor:c0,IsFilled:c1};};_4.$cctor=function(){_4.$cctor=a.ignore;_4.defaultSize={$:0,$0:500,$1:200};};_7=_6.Dictionary=cU.Class({set_Item:function(cX,cY){this.set(cX,cY);},ContainsKey:function(cX){var cY,cZ;cY=this;cZ=this.data[this.hash(cX)];return cZ==null?false:e.exists(function(c0){return cY.equals.apply(null,[(f.KeyValue(c0))[0],cX]);},cZ);},TryGetValue:function(cX,cY){var cZ,c0,c1;cZ=this;c0=this.data[this.hash(cX)];return c0==null?false:(c1=e.tryPick(function(c2){var c3;c3=f.KeyValue(c2);return cZ.equals.apply(null,[c3[0],cX])?{$:1,$0:c3[1]}:null;},c0),c1!=null&&c1.$==1&&(cY.set(c1.$0),true));},RemoveKey:function(cX){return this.remove(cX);},Keys:function(){return new bW.New(this);},set:function(cX,cY){var cZ,c0,c1,c2;cZ=this;c0=this.hash(cX);c1=this.data[c0];if(c1==null){this.count=this.count+1;this.data[c0]=new a.Array({K:cX,V:cY});}else{c2=e.tryFindIndex(function(c3){return cZ.equals.apply(null,[(f.KeyValue(c3))[0],cX]);},c1);c2==null?(this.count=this.count+1,c1.push({K:cX,V:cY})):c1[c2.$0]={K:cX,V:cY};}},remove:function(cX){var cY,cZ,c0,c1;cY=this;cZ=this.hash(cX);c0=this.data[cZ];return c0==null?false:(c1=e.filter(function(c2){return!cY.equals.apply(null,[(f.KeyValue(c2))[0],cX]);},c0),e.length(c1)<c0.length&&(this.count=this.count-1,this.data[cZ]=c1,true));},Item:function(cX){return this.get(cX);},GetEnumerator:function(){return bw.Get0(e.concat(s.GetFieldValues(this.data)));},Values:function(){return new ch.New(this);},get:function(cX){var cY,cZ;cY=this;cZ=this.data[this.hash(cX)];return cZ==null?bO.notPresent():e.pick(function(c0){var c1;c1=f.KeyValue(c0);return cY.equals.apply(null,[c1[0],cX])?{$:1,$0:c1[1]}:null;},cZ);}},g,_7);_7.New$5=cU.Ctor(function(){_7.New$6.call(this,[],I.Equals,I.Hash);},_7);_7.New$6=cU.Ctor(function(cX,cY,cZ){var c0,c1;g.New.call(this);this.equals=cY;this.hash=cZ;this.count=0;this.data=[];c0=bw.Get(cX);try{while(c0.MoveNext()){c1=c0.Current();this.set(c1.K,c1.V);}}finally{if(typeof c0=="object"&&"Dispose"in c0)c0.Dispose();}},_7);_8.New=function(cX,cY,cZ,c0){return{PointColor:cX,PointHighlightFill:cY,PointHighlightStroke:cZ,PointStrokeColor:c0};};$=_.FSharpEvent=cU.Class({},g,$);$.New=cU.Ctor(function(){g.New.call(this);this.event=bJ.New(cU.MarkResizable([]));},$);ba.$cctor=function(){var cX;ba.$cctor=a.ignore;ba.defaultChartConfig=_2.New("Chart");ba.defaultSeriesChartConfig=_3.New("x","y",new A({$:0,$0:220,$1:220,$2:220,$3:0.2}),new A({$:0,$0:220,$1:220,$2:220,$3:1}),true);ba.defaultColorConfig=_8.New(new A({$:0,$0:220,$1:220,$2:220,$3:1}),new A({$:1,$0:"#fff"}),new A({$:0,$0:220,$1:220,$2:220,$3:1}),new A({$:1,$0:"#fff"}));ba.defaultPolarData=(cX=new bK.New(),function(cY){return function(cZ){var c0,c1,c2,c3;c0=(c1=cX.Next(0,256),(c2=cX.Next(0,256),(c3=cX.Next(0,256),[new A({$:0,$0:c1,$1:c2,$2:c3,$3:1}),new A({$:0,$0:c1,$1:c2,$2:c3,$3:0.6})])));return bL.New(cZ,c0[0],c0[1],cY);};});};bb.Map=function(cX,cY){var cZ,c0;cZ=cY.s;return cZ!=null&&cZ.$==0?bb.New({$:0,$0:cX(cZ.$0)}):(c0=bb.New({$:3,$0:[],$1:[]}),(bb.When(cY,function(c1){bb.MarkDone(c0,cY,cX(c1));},c0),c0));};bb.WhenObsoleteRun=function(cX,cY){var cZ;cZ=cX.s;if(cZ==null)cY();else cZ!=null&&cZ.$==2?cZ.$1.push(cY):cZ!=null&&cZ.$==3?cZ.$1.push(cY):void 0;};bb.When=function(cX,cY,cZ){var c0;c0=cX.s;if(c0==null)bb.Obsolete(cZ);else c0!=null&&c0.$==2?(bb.EnqueueSafe(c0.$1,cZ),cY(c0.$0)):c0!=null&&c0.$==3?(c0.$0.push(cY),bb.EnqueueSafe(c0.$1,cZ)):cY(c0.$0);};bb.MarkDone=function(cX,cY,cZ){var c0;if(c0=cY.s,c0!=null&&c0.$==0)bb.MarkForever(cX,cZ);else bb.MarkReady(cX,cZ);};bb.EnqueueSafe=function(cX,cY){var cZ,c0,c1,c2;cX.push(cY);if(cX.length%20===0){cZ=cX.slice(0);cr.Clear(cX);for(c0=0,c1=e.length(cZ)-1;c0<=c1;c0++){c2=e.get(cZ,c0);if(typeof c2=="object")(function(c3){if(c3.s)cX.push(c3);}(c2));else(function(c3){cX.push(c3);}(c2));}}else void 0;};bb.MarkForever=function(cX,cY){var cZ,c0,c1,c2;cZ=cX.s;if(cZ!=null&&cZ.$==3){cX.s={$:0,$0:cY};c0=cZ.$0;for(c1=0,c2=e.length(c0)-1;c1<=c2;c1++)(e.get(c0,c1))(cY);}else void 0;};bb.MarkReady=function(cX,cY){var cZ,c0,c1,c2;cZ=cX.s;if(cZ!=null&&cZ.$==3){cX.s={$:2,$0:cY,$1:cZ.$1};c0=cZ.$0;for(c1=0,c2=e.length(c0)-1;c1<=c2;c1++)(e.get(c0,c1))(cY);}else void 0;};bb.Join=function(cX){var cY;cY=bb.New({$:3,$0:[],$1:[]});bb.When(cX,function(cZ){var c0;c0=cZ();bb.When(c0,function(c1){var c2,c3;if((c2=c0.s,c2!=null&&c2.$==0)&&(c3=cX.s,c3!=null&&c3.$==0))bb.MarkForever(cY,c1);else bb.MarkReady(cY,c1);},cY);},cY);return cY;};bb.WhenRun=function(cX,cY,cZ){var c0;c0=cX.s;if(c0==null)cZ();else c0!=null&&c0.$==2?(c0.$1.push(cZ),cY(c0.$0)):c0!=null&&c0.$==3?(c0.$0.push(cY),c0.$1.push(cZ)):cY(c0.$0);};bb.Map3=function(cX,cY,cZ,c0){var c1,c2,c3,c4;function c5(c6){var c7,c8,c9,c_;if(!(c7=c4.s,c7!=null&&c7.$==0||c7!=null&&c7.$==2)){c8=bb.ValueAndForever(cY);c9=bb.ValueAndForever(cZ);c_=bb.ValueAndForever(c0);if(c8!=null&&c8.$==1)c9!=null&&c9.$==1?c_!=null&&c_.$==1?c8.$0[1]&&c9.$0[1]&&c_.$0[1]?bb.MarkForever(c4,cX(c8.$0[0],c9.$0[0],c_.$0[0])):bb.MarkReady(c4,cX(c8.$0[0],c9.$0[0],c_.$0[0])):void 0:void 0;}}c1=cY.s;c2=cZ.s;c3=c0.s;return c1!=null&&c1.$==0?c2!=null&&c2.$==0?c3!=null&&c3.$==0?bb.New({$:0,$0:cX(c1.$0,c2.$0,c3.$0)}):bb.Map3Opt1(cX,c1.$0,c2.$0,c0):c3!=null&&c3.$==0?bb.Map3Opt2(cX,c1.$0,c3.$0,cZ):bb.Map3Opt3(cX,c1.$0,cZ,c0):c2!=null&&c2.$==0?c3!=null&&c3.$==0?bb.Map3Opt4(cX,c2.$0,c3.$0,cY):bb.Map3Opt5(cX,c2.$0,cY,c0):c3!=null&&c3.$==0?bb.Map3Opt6(cX,c3.$0,cY,cZ):(c4=bb.New({$:3,$0:[],$1:[]}),(bb.When(cY,c5,c4),bb.When(cZ,c5,c4),bb.When(c0,c5,c4),c4));};bb.Sequence=function(cX){var cY,cZ,c0;function c1(c2){var c3;if(c0[0]===0){c3=e.map(function(c4){var c5;c5=c4.s;return c5!=null&&c5.$==0?c5.$0:c5!=null&&c5.$==2?c5.$0:f.FailWith("value not found by View.Sequence");},cY);if(e.forall(function(c4){var c5;c5=c4.s;return c5!=null&&c5.$==0;},cY))bb.MarkForever(cZ,c3);else bb.MarkReady(cZ,c3);}else c0[0]=c0[0]-1;}cY=e.ofSeq(cX);return cY.length==0?bb.New({$:0,$0:[]}):(cZ=bb.New({$:3,$0:[],$1:[]}),(c0=[e.length(cY)-1],(e.iter(function(c2){bb.When(c2,c1,cZ);},cY),cZ)));};bb.Map2=function(cX,cY,cZ){var c0,c1,c2;function c3(c4){var c5,c6,c7;if(!(c5=c2.s,c5!=null&&c5.$==0||c5!=null&&c5.$==2)){c6=bb.ValueAndForever(cY);c7=bb.ValueAndForever(cZ);if(c6!=null&&c6.$==1)c7!=null&&c7.$==1?c6.$0[1]&&c7.$0[1]?bb.MarkForever(c2,cX(c6.$0[0],c7.$0[0])):bb.MarkReady(c2,cX(c6.$0[0],c7.$0[0])):void 0;}}c0=cY.s;c1=cZ.s;return c0!=null&&c0.$==0?c1!=null&&c1.$==0?bb.New({$:0,$0:cX(c0.$0,c1.$0)}):bb.Map2Opt1(cX,c0.$0,cZ):c1!=null&&c1.$==0?bb.Map2Opt2(cX,c1.$0,cY):(c2=bb.New({$:3,$0:[],$1:[]}),(bb.When(cY,c3,c2),bb.When(cZ,c3,c2),c2));};bb.Map2Unit=function(cX,cY){var cZ,c0,c1;function c2(){var c3,c4,c5;if(!(c3=c1.s,c3!=null&&c3.$==0||c3!=null&&c3.$==2)){c4=bb.ValueAndForever(cX);c5=bb.ValueAndForever(cY);if(c4!=null&&c4.$==1)c5!=null&&c5.$==1?c4.$0[1]&&c5.$0[1]?bb.MarkForever(c1,null):bb.MarkReady(c1,null):void 0;}}cZ=cX.s;c0=cY.s;return cZ!=null&&cZ.$==0?c0!=null&&c0.$==0?bb.New({$:0,$0:null}):cY:c0!=null&&c0.$==0?cX:(c1=bb.New({$:3,$0:[],$1:[]}),(bb.When(cX,c2,c1),bb.When(cY,c2,c1),c1));};bb.Copy=function(cX){var cY,cZ,c0;cY=cX.s;return cY==null?cX:cY!=null&&cY.$==2?(cZ=bb.New({$:2,$0:cY.$0,$1:[]}),(bb.WhenObsolete(cX,cZ),cZ)):cY!=null&&cY.$==3?(c0=bb.New({$:3,$0:[],$1:[]}),(bb.When(cX,function(c1){bb.MarkDone(c0,cX,c1);},c0),c0)):cX;};bb.Map3Opt1=function(cX,cY,cZ,c0){return bb.Map(function(c1){return cX(cY,cZ,c1);},c0);};bb.Map3Opt2=function(cX,cY,cZ,c0){return bb.Map(function(c1){return cX(cY,c1,cZ);},c0);};bb.Map3Opt3=function(cX,cY,cZ,c0){return bb.Map2(function(c1,c2){return cX(cY,c1,c2);},cZ,c0);};bb.Map3Opt4=function(cX,cY,cZ,c0){return bb.Map(function(c1){return cX(c1,cY,cZ);},c0);};bb.Map3Opt5=function(cX,cY,cZ,c0){return bb.Map2(function(c1,c2){return cX(c1,cY,c2);},cZ,c0);};bb.Map3Opt6=function(cX,cY,cZ,c0){return bb.Map2(function(c1,c2){return cX(c1,c2,cY);},cZ,c0);};bb.ValueAndForever=function(cX){var cY;cY=cX.s;return cY!=null&&cY.$==0?{$:1,$0:[cY.$0,true]}:cY!=null&&cY.$==2?{$:1,$0:[cY.$0,false]}:null;};bb.Map2Opt1=function(cX,cY,cZ){return bb.Map(function(c0){return cX(cY,c0);},cZ);};bb.Map2Opt2=function(cX,cY,cZ){return bb.Map(function(c0){return cX(c0,cY);},cZ);};bb.WhenObsolete=function(cX,cY){var cZ;cZ=cX.s;if(cZ==null)bb.Obsolete(cY);else cZ!=null&&cZ.$==2?bb.EnqueueSafe(cZ.$1,cY):cZ!=null&&cZ.$==3?bb.EnqueueSafe(cZ.$1,cY):void 0;};bc=h.ConcreteVar=cU.Class({get_View:function(){return this.view;},Set:function(cX){if(this.isConst)(function(cY){return cY("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(cY){cV.log(cY);}));else{bb.Obsolete(this.snap);this.current=cX;this.snap=bb.New({$:2,$0:cX,$1:[]});}},Get:function(){return this.current;},SetFinal:function(cX){if(this.isConst)(function(cY){return cY("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(cY){cV.log(cY);}));else{bb.Obsolete(this.snap);this.isConst=true;this.current=cX;this.snap=bb.New({$:0,$0:cX});}},UpdateMaybe:function(cX){var cY;cY=cX(this.Get());if(cY!=null&&cY.$==1)this.Set(cY.$0);}},o,bc);bc.New=cU.Ctor(function(cX,cY,cZ){var c0;c0=this;o.New.call(this);this.isConst=cX;this.current=cZ;this.snap=cY;this.view=function(){return c0.snap;};this.id=bN.Int();},bc);bd=F.TextView=cU.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:this.fillWith};},get_AsChoiceView:function(){return{$:1,$0:this.fillWith};}},m,bd);bd.New=cU.Ctor(function(cX,cY){m.New.call(this);this.name=cX;this.fillWith=cY;},bd);be=F.VarStr=cU.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:this.fillWith.get_View()};},AddAttribute:function(cX,cY){(cX(cY))(bt.Value(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:D.Map(a.String,this.fillWith.get_View())};}},m,be);be.New=cU.Ctor(function(cX,cY){m.New.call(this);this.name=cX;this.fillWith=cY;},be);bf.CreateEmbedNode=function(){return{Current:null,Dirty:false};};bf.UpdateEmbedNode=function(cX,cY){cX.Current=cY;cX.Dirty=true;};bf.CreateRunState=function(cX,cY){return cj.New(ck.get_Empty(),bf.CreateElemNode(cX,bT.EmptyAttr(),cY));};bf.PerformAnimatedUpdate=function(cX,cY,cZ){var c0;return b1.get_UseAnimations()?(c0=null,b9.Delay(function(){var c1,c2,c3;c1=ck.FindAll(cZ);c2=bf.ComputeChangeAnim(cY,c1);c3=bf.ComputeEnterAnim(cY,c1);return b9.Bind(b1.Play(b1.Append(c2,bf.ComputeExitAnim(cY,c1))),function(){return b9.Bind(bf.SyncElemNodesNextFrame(cX,cY),function(){return b9.Bind(b1.Play(c3),function(){cY.PreviousNodes=c1;return b9.Return(null);});});});})):bf.SyncElemNodesNextFrame(cX,cY);};bf.PerformSyncUpdate=function(cX,cY,cZ){var c0;c0=ck.FindAll(cZ);bf.SyncElemNode(cX,cY.Top);cY.PreviousNodes=c0;};bf.LinkPrevElement=function(cX,cY){bf.InsertDoc(cX.parentNode,cY,cX);};bf.CreateDelimitedRunState=function(cX,cY,cZ){return cj.New(ck.get_Empty(),bf.CreateDelimitedElemNode(cX,cY,bT.EmptyAttr(),cZ));};bf.LinkElement=function(cX,cY){bf.InsertDoc(cX,cY,null);};bf.InsertBeforeDelim=function(cX,cY){var cZ,c0;cZ=cX.parentNode;c0=self.document.createTextNode("");cZ.insertBefore(c0,cX);bf.LinkPrevElement(cX,cY);return c0;};bf.CreateElemNode=function(cX,cY,cZ){var c0;bf.LinkElement(cX,cZ);c0=bT.Insert(cX,cY);return bX.New(c0,cZ,null,cX,bN.Int(),cU.GetOptional(c0.OnAfterRender));};bf.SyncElemNodesNextFrame=function(cX,cY){function cZ(c0){a.requestAnimationFrame(function(){bf.SyncElemNode(cX,cY.Top);c0();});}return b2.BatchUpdatesEnabled()?b9.FromContinuations(function(c0,c1,c2){return cZ.apply(null,[c0,c1,c2]);}):(bf.SyncElemNode(cX,cY.Top),b9.Return(null));};bf.ComputeExitAnim=function(cX,cY){return b1.Concat(e.map(function(cZ){return bT.GetExitAnim(cZ.Attr);},ck.ToArray(ck.Except(cY,ck.Filter(function(cZ){return bT.HasExitAnim(cZ.Attr);},cX.PreviousNodes)))));};bf.ComputeEnterAnim=function(cX,cY){return b1.Concat(e.map(function(cZ){return bT.GetEnterAnim(cZ.Attr);},ck.ToArray(ck.Except(cX.PreviousNodes,ck.Filter(function(cZ){return bT.HasEnterAnim(cZ.Attr);},cY)))));};bf.ComputeChangeAnim=function(cX,cY){var cZ;function c0(c1){return bT.HasChangeAnim(c1.Attr);}cZ=function(c1){return ck.Filter(c0,c1);};return b1.Concat(e.map(function(c1){return bT.GetChangeAnim(c1.Attr);},ck.ToArray(ck.Intersect(cZ(cX.PreviousNodes),cZ(cY)))));};bf.SyncElemNode=function(cX,cY){!cX?bf.SyncElement(cY):void 0;bf.Sync(cY.Children);bf.AfterRender(cY);};bf.InsertDoc=function(cX,cY,cZ){var c0,c1,c2;while(true)if(cY!=null&&cY.$==1)return bf.InsertNode(cX,cY.$0.El,cZ);else if(cY!=null&&cY.$==2){c0=cY.$0;c0.Dirty=false;cY=c0.Current;}else if(cY==null)return cZ;else if(cY!=null&&cY.$==4)return bf.InsertNode(cX,cY.$0.Text,cZ);else if(cY!=null&&cY.$==5)return bf.InsertNode(cX,cY.$0,cZ);else if(cY!=null&&cY.$==6)return e.foldBack(function(c3,c4){return(((cU.Curried3(function(c5,c6,c7){return c6==null||c6.constructor===T?bf.InsertDoc(c5,c6,c7):bf.InsertNode(c5,c6,c7);}))(cX))(c3))(c4);},cY.$0.Els,cZ);else{c1=cY.$1;c2=cY.$0;cY=c2;cZ=bf.InsertDoc(cX,c1,cZ);}};bf.CreateDelimitedElemNode=function(cX,cY,cZ,c0){var c1,c2;c1=cX.parentNode;bf.LinkPrevElement(cY,c0);c2=bT.Insert(c1,cZ);return bX.New(c2,c0,{$:1,$0:[cX,cY]},c1,bN.Int(),cU.GetOptional(c2.OnAfterRender));};bf.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};bf.UpdateTextNode=function(cX,cY){cX.Value=cY;cX.Dirty=true;};bf.SyncElement=function(cX){function cY(cZ){function c0(c1){var c2,c3,c4,c5;while(true){if(c1!=null&&c1.$==0){c3=c1.$1;c4=c1.$0;if(c0(c4))return true;else c1=c3;}else if(c1!=null&&c1.$==2){c5=c1.$0;if(c5.Dirty)return true;else c1=c5.Current;}else return c1!=null&&c1.$==6&&(c2=c1.$0,c2.Dirty||e.exists(cY,c2.Holes));}}return c0(cZ.Children);}bT.Sync(cX.El,cX.Attr);if(cY(cX))bf.DoSyncElement(cX);};bf.Sync=function(cX){var cY,cZ,c0,c1,c2;while(true){if(cX!=null&&cX.$==1)return bf.SyncElemNode(false,cX.$0);else if(cX!=null&&cX.$==2){c0=cX.$0;cX=c0.Current;}else if(cX==null)return null;else if(cX!=null&&cX.$==5)return null;else if(cX!=null&&cX.$==4){cY=cX.$0;return cY.Dirty?(cY.Text.nodeValue=cY.Value,cY.Dirty=false):null;}else if(cX!=null&&cX.$==6){cZ=cX.$0;e.iter(function(c3){bf.SyncElemNode(false,c3);},cZ.Holes);e.iter(function(c3){bT.Sync(c3[0],c3[1]);},cZ.Attrs);return bf.AfterRender(cZ);}else{c1=cX.$1;c2=cX.$0;bf.Sync(c2);cX=c1;}}};bf.AfterRender=function(cX){var cY;cY=cU.GetOptional(cX.Render);if(cY!=null&&cY.$==1){cY.$0(cX.El);cU.SetOptional(cX,"Render",null);}};bf.InsertNode=function(cX,cY,cZ){bU.InsertAt(cX,cZ,cY);return cY;};bf.DoSyncElement=function(cX){var cY,cZ,c0;function c1(c2,c3){var c4,c5,c6,c7;while(true){if(c2!=null&&c2.$==1)return c2.$0.El;else if(c2!=null&&c2.$==2){c5=c2.$0;if(c5.Dirty){c5.Dirty=false;return bf.InsertDoc(cY,c5.Current,c3);}else c2=c5.Current;}else if(c2==null)return c3;else if(c2!=null&&c2.$==4)return c2.$0.Text;else if(c2!=null&&c2.$==5)return c2.$0;else if(c2!=null&&c2.$==6){c4=c2.$0;c4.Dirty?c4.Dirty=false:void 0;return e.foldBack(function(c8,c9){return c8==null||c8.constructor===T?c1(c8,c9):c8;},c4.Els,c3);}else{c6=c2.$1;c7=c2.$0;c2=c7;c3=c1(c6,c3);}}}cY=cX.El;cL.Iter((cZ=cX.El,function(c2){bU.RemoveNode(cZ,c2);}),cL.Except(cL.DocChildren(cX),cL.Children(cX.El,cU.GetOptional(cX.Delimiters))));c1(cX.Children,(c0=cU.GetOptional(cX.Delimiters),c0!=null&&c0.$==1?c0.$0[1]:null));};bg=_6.HashSet=cU.Class({SAdd:function(cX){return this.add(cX);},Contains:function(cX){var cY;cY=this.data[this.hash(cX)];return cY==null?false:this.arrContains(cX,cY);},add:function(cX){var cY,cZ;cY=this.hash(cX);cZ=this.data[cY];return cZ==null?(this.data[cY]=[cX],this.count=this.count+1,true):this.arrContains(cX,cZ)?false:(cZ.push(cX),this.count=this.count+1,true);},arrContains:function(cX,cY){var cZ,c0,c1,c2;cZ=true;c0=0;c2=cY.length;while(cZ&&c0<c2)if(this.equals.apply(null,[cY[c0],cX]))cZ=false;else c0=c0+1;return!cZ;},GetEnumerator:function(){return bw.Get(cs.concat(this.data));},ExceptWith:function(cX){var cY;cY=bw.Get(cX);try{while(cY.MoveNext())this.Remove(cY.Current());}finally{if(typeof cY=="object"&&"Dispose"in cY)cY.Dispose();}},Count:function(){return this.count;},IntersectWith:function(cX){var cY,cZ,c0,c1,c2;cY=new bg.New$4(cX,this.equals,this.hash);cZ=cs.concat(this.data);for(c0=0,c1=cZ.length-1;c0<=c1;c0++){c2=cZ[c0];if(!cY.Contains(c2))this.Remove(c2);}},Remove:function(cX){var cY;cY=this.data[this.hash(cX)];return cY==null?false:this.arrRemove(cX,cY)&&(this.count=this.count-1,true);},CopyTo:function(cX,cY){var cZ,c0,c1;cZ=cs.concat(this.data);for(c0=0,c1=cZ.length-1;c0<=c1;c0++)e.set(cX,c0+cY,cZ[c0]);},arrRemove:function(cX,cY){var cZ,c0,c1,c2;cZ=true;c0=0;c2=cY.length;while(cZ&&c0<c2)if(this.equals.apply(null,[cY[c0],cX])){cY.splice.apply(cY,[c0,1]);cZ=false;}else c0=c0+1;return!cZ;}},g,bg);bg.New$3=cU.Ctor(function(){bg.New$4.call(this,[],I.Equals,I.Hash);},bg);bg.New$4=cU.Ctor(function(cX,cY,cZ){var c0;g.New.call(this);this.equals=cY;this.hash=cZ;this.data=[];this.count=0;c0=bw.Get(cX);try{while(c0.MoveNext())this.add(c0.Current());}finally{if(typeof c0=="object"&&"Dispose"in c0)c0.Dispose();}},bg);bg.New$2=cU.Ctor(function(cX){bg.New$4.call(this,cX,I.Equals,I.Hash);},bg);bh.$cctor=function(){bh.$cctor=a.ignore;bh.initialized=new _7.New$5();};bh=k.TemplateInitializer=cU.Class({},g,bh);bh.GetOrAddHoleFor=function(cX,cY,cZ){var c0,c1,c2,c3;bh.$cctor();c0=bh.GetHolesFor(cX);c1=(c2=null,[c0.TryGetValue(cY,{get:function(){return c2;},set:function(c4){c2=c4;}}),c2]);return c1[0]?c1[1]:(c3=cZ(),(c0.set_Item(cY,c3),c3));};bh.GetHolesFor=function(cX){var cY,cZ,c0;bh.$cctor();cY=(cZ=null,[bh.initialized.TryGetValue(cX,{get:function(){return cZ;},set:function(c1){cZ=c1;}}),cZ]);return cY[0]?cY[1]:(c0=new _7.New$5(),(bh.initialized.set_Item(cX,c0),c0));};bi=F.VarFloatUnchecked=cU.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:D.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(cX,cY){(cX(cY))(bt.FloatValueUnchecked(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:D.Map(a.String,this.fillWith.get_View())};}},m,bi);bi.New=cU.Ctor(function(cX,cY){m.New.call(this);this.name=cX;this.fillWith=cY;},bi);bj=F.VarBool=cU.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:D.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(cX,cY){(cX(cY))(bt.Checked(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:D.Map(a.String,this.fillWith.get_View())};}},m,bj);bj.New=cU.Ctor(function(cX,cY){m.New.call(this);this.name=cX;this.fillWith=cY;},bj);bk=F.VarDateTime=cU.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:D.Map(function(cX){return(new cW(cX)).toLocaleString();},this.fillWith.get_View())};},AddAttribute:function(cX,cY){(cX(cY))(bt.DateTimeValue(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:D.Map(function(cX){return(new cW(cX)).toLocaleString();},this.fillWith.get_View())};}},m,bk);bk.New=cU.Ctor(function(cX,cY){m.New.call(this);this.name=cX;this.fillWith=cY;},bk);bl=F.VarFile=cU.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:D.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(cX,cY){(cX(cY))(bt.FileValue(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:D.Map(a.String,this.fillWith.get_View())};}},m,bl);bl.New=cU.Ctor(function(cX,cY){m.New.call(this);this.name=cX;this.fillWith=cY;},bl);bm=F.VarDomElement=cU.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},m,bm);bm.New=cU.Ctor(function(cX,cY){m.New.call(this);this.name=cX;this.fillWith=cY;},bm);bo.JSUnion=function(cX,cY){var cZ;function c0(c4){var c5;function c6(c7){return c7!=null&&c7.$==1&&I.Equals(c4,c7.$0);}c5=_0.tryFindIndex(function(c7){return c6(c7[0]);},cY);return c5!=null&&c5.$==1?c5.$0:c4.$;}function c1(c4,c5){return e.init(e.length((e.get(cY,c4))[2]),function(c6){return c5["$"+a.String(c6)];});}function c2(c4,c5){var c6,c7,c8;c6=cX==null?{}:new cX();c7=e.get(cY,c4);return(c8=c7[0],c8!=null&&c8.$==1)?c7[0].$0:(c6.$=c4,_0.iteri(function(c9,c_){c6["$"+a.String(c9)]=c_;},c5),c6);}function c3(c4,c5){var c6;function c7(c8,c9){return[c4,c8,c9,c6];}c6=c5[2];return _0.map(function(c8){return c7(c8[0],c8[1]);},c5[1]);}cZ=e.ofSeq(_0.collect(function(c4){return c3(c4[0],c4[1]);},_0.indexed(cY)));return bQ.New$1(function(c4){function c5(c6,c7,c8,c9){var c_,c$,da;function db(dc){return function(dd){return function(de){var df;function dg(dh,di){return((db(df))(dh))(new bG({$:1,$0:di,$1:de}));}return dc.$==1?(df=dc.$1,_0.collect(function(dh){return dg(dh[0],dh[1]);},dc.$0.Parse(dd))):[[dd,c2(c6,e.ofList(bF.rev(de)))]];};};}return bo.isCorrectMethod(c7,c4.Method)?(c_=bR.startsWith(bF.ofArray(c8),c4.Segments),c_==null?[]:(c$=c_.$0,(da=bF.ofArray(c9),da.$==0?[[bq.New(c$,c4.QueryArgs,c4.FormData,c4.Method,c4.Body),c2(c6,[])]]:((db(da))(bq.New(c$,c4.QueryArgs,c4.FormData,c4.Method,c4.Body)))(bG.Empty)))):[];}return _0.collect(function(c6){return c5(c6[0],c6[1],c6[2],c6[3]);},cZ);},function(c4){var c5,c6,c7,c8,c9,c_;function c$(da,db){return db.Write(da);}c5=c0(c4);c6=e.get(cY,c5);c7=c6[2];c8=e.get(c6[1],0);c9=[bq.Segment(bF.ofArray(c8[1]),c8[0])];return c7.length==0?{$:1,$0:c9}:(c_=(((cU.Curried3(e.map2))(c$))(c1(c5,c4)))(c7),e.forall(function(da){return da!=null;},c_)?{$:1,$0:_0.append(c9,_0.collect(function(da){return da.$0;},c_))}:null);});};bo.isCorrectMethod=function(cX,cY){return cY!=null&&cY.$==1?cX!=null&&cX.$==1?I.Equals(cY.$0,cX.$0):true:!(cX!=null&&cX.$==1);};bp.Parse=function(cX,cY){function cZ(c0,c1){return c0.Segments.$==0?{$:1,$0:c1}:null;}return _0.tryPick(function(c0){return cZ(c0[0],c0[1]);},cX.Parse(cY));};bp.HashLink=function(cX,cY){return"#"+bp.Link(cX,cY);};bp.Link=function(cX,cY){var cZ;cZ=bp.Write(cX,cY);return cZ==null?"":cZ.$0.ToLink();};bp.Write=function(cX,cY){var cZ;cZ=cX.Write(cY);return cZ==null?null:{$:1,$0:bq.Combine(cZ.$0)};};bq=bn.Route=cU.Class({ToLink:function(){return cx.WriteLink(this.Segments,this.QueryArgs);}},null,bq);bq.FromHash=function(cX,cY){var cZ,c0;cZ=cX.indexOf("#");return cZ===-1?bq.get_Empty():(c0=cX.substring(cZ+1),cY!=null&&cY.$0?c0==""||c0=="/"?bq.get_Empty():b7.StartsWith(c0,"/")?bq.FromUrl(c0.substring(1),{$:1,$0:true}):bq.Segment$2(c0):bq.FromUrl(cX.substring(cZ),{$:1,$0:false}));};bq.Segment=function(cX,cY){var cZ;cZ=bq.get_Empty();return bq.New(cX,cZ.QueryArgs,cZ.FormData,cY,cZ.Body);};bq.get_Empty=function(){return bq.New(bG.Empty,new b5.New([]),new b5.New([]),null,{$:1,$0:null});};bq.FromUrl=function(cX,cY){var cZ,c0,c1;cZ=(c0=cX.indexOf("?"),c0===-1?[cX,new b5.New([])]:[b7.Substring(cX,0,c0),bq.ParseQuery(cX.substring(c0+1))]);c1=bq.get_Empty();return bq.New(bF.ofArray(b7.SplitChars(cZ[0],["/"],cY!=null&&cY.$0?0:1)),cZ[1],c1.FormData,c1.Method,c1.Body);};bq.Segment$2=function(cX){var cY;cY=bq.get_Empty();return bq.New(bF.ofArray([cX]),cY.QueryArgs,cY.FormData,cY.Method,cY.Body);};bq.ParseQuery=function(cX){return b6.OfArray(e.ofSeq(e.choose(function(cY){var cZ,c0;cZ=b7.SplitChars(cY,["="],0);return!I.Equals(cZ,null)&&cZ.length===2?(c0=e.get(cZ,1),{$:1,$0:[e.get(cZ,0),c0]}):((function(c1){return function(c2){return c1("wrong format for query argument: "+b8.toSafe(c2));};}(function(c1){cV.log(c1);}))(cY),null);},b7.SplitChars(cX,["&"],0))));};bq.Combine=function(cX){var cY,cZ,c0,c1,c2,c3,c4;cY=e.ofSeq(cX);cZ=e.length(cY);return cZ===0?bq.get_Empty():cZ===1?e.get(cY,0):(c0=null,c1=null,c2=[],c3=new b5.New([]),c4=new b5.New([]),e.iter(function(c5){var c6,c7;c6=c5.Method;if(c6!=null&&c6.$==1)c0=c6;c7=c5.Body;if(c7==null);else c1=c7;c3=b6.FoldBack(function(c8,c9,c_){return c_.Add$1(c8,c9);},c3,c5.QueryArgs);c4=b6.FoldBack(function(c8,c9,c_){return c_.Add$1(c8,c9);},c4,c5.FormData);bF.iter(function(c8){c2.push(c8);},c5.Segments);},cY),bq.New(bF.ofSeq(c2),c3,c4,c0,c1));};bq.New=function(cX,cY,cZ,c0,c1){return new bq({Segments:cX,QueryArgs:cY,FormData:cZ,Method:c0,Body:c1});};bs=br.attr=cU.Class({},g,bs);bt.Style=function(cX,cY){return bT.Static(function(cZ){cZ.style.setProperty(cX,cY);});};bt.OnAfterRender=function(cX){return new bS({$:4,$0:cX});};bt.Handler=function(cX,cY){return bT.Static(function(cZ){cZ.addEventListener(cX,function(c0){return(cY(cZ))(c0);},false);});};bt.Dynamic=function(cX,cY){return bT.Dynamic(cY,function(cZ){return function(c0){return cZ.setAttribute(cX,c0);};});};bt.Value=function(cX){return bt.ValueWith(cH.StringApply(),cX);};bt.FloatValueUnchecked=function(cX){return bt.ValueWith(cH.FloatApplyUnchecked(),cX);};bt.Checked=function(cX){return bt.ValueWith(cH.BoolCheckedApply(),cX);};bt.DateTimeValue=function(cX){return bt.ValueWith(cH.DateTimeApplyUnchecked(),cX);};bt.FileValue=function(cX){return bt.ValueWith(cH.FileApplyUnchecked(),cX);};bt.ValueWith=function(cX,cY){var cZ;cZ=cX(cY);return bS.Append(bT.Static(cZ[0]),bt.DynamicCustom(cZ[1],cZ[2]));};bt.DynamicCustom=function(cX,cY){return bT.Dynamic(cY,cX);};bw.Get=function(cX){return cX instanceof a.Array?bw.ArrayEnumerator(cX):I.Equals(typeof cX,"string")?bw.StringEnumerator(cX):cX.GetEnumerator();};bw.ArrayEnumerator=function(cX){return new bx.New(0,null,function(cY){var cZ;cZ=cY.s;return cZ<e.length(cX)&&(cY.c=e.get(cX,cZ),cY.s=cZ+1,true);},void 0);};bw.StringEnumerator=function(cX){return new bx.New(0,null,function(cY){var cZ;cZ=cY.s;return cZ<cX.length&&(cY.c=cX[cZ],cY.s=cZ+1,true);},void 0);};bw.Get0=function(cX){return cX instanceof a.Array?bw.ArrayEnumerator(cX):I.Equals(typeof cX,"string")?bw.StringEnumerator(cX):"GetEnumerator0"in cX?cX.GetEnumerator0():cX.GetEnumerator();};bx=bw.T=cU.Class({MoveNext:function(){var cX;cX=this.n(this);this.e=cX?1:2;return cX;},Current:function(){return this.e===1?this.c:this.e===0?f.FailWith("Enumeration has not started. Call MoveNext."):f.FailWith("Enumeration already finished.");},Dispose:function(){if(this.d)this.d(this);}},g,bx);bx.New=cU.Ctor(function(cX,cY,cZ,c0){g.New.call(this);this.s=cX;this.c=cY;this.n=cZ;this.d=c0;this.e=0;},bx);by.fold=function(cX,cY,cZ){return cZ==null?cY:cX(cY,cZ.$0);};by.ofObj=function(cX){return cX==null?null:{$:1,$0:cX};};bz.array=function(cX,cY,cZ){var c0,c1;return cY==null?cZ!=null&&cZ.$==1?(c0=cZ.$0,c0<0?[]:cX.slice(0,c0+1)):[]:cZ==null?cX.slice(cY.$0):(c1=cZ.$0,c1<0?[]:cX.slice(cY.$0,c1+1));};bz.string=function(cX,cY,cZ){var c0,c1;return cY==null?cZ!=null&&cZ.$==1?(c0=cZ.$0,c0<0?"":cX.slice(0,c0+1)):"":cZ==null?cX.slice(cY.$0):(c1=cZ.$0,c1<0?"":cX.slice(cY.$0,c1+1));};bA=N.BatchUpdater=cU.Class({Update:function(cX){var cY,cZ;function c0(){cY.handle[0]=null;cY.count[0]=0;cX();}cY=this;cZ=this.handle[0];if(cZ==null);else a.clearTimeout(cZ.$0);if(this.count[0]<this.maxCount){this.count[0]++;this.handle[0]={$:1,$0:a.setTimeout(c0,this.interval)};}else c0();}},g,bA);bA.New=cU.Ctor(function(cX,cY){g.New.call(this);this.interval=cX==null?75:cX.$0;this.maxCount=cY==null?10:cY.$0;this.handle=[null];this.count=[0];},bA);bB.observer=function(cX){return{OnCompleted:function(){return null;},OnError:function(){return null;},OnNext:cX};};bC.headOption=function(cX){return _0.isEmpty(cX)?null:{$:1,$0:_0.nth(0,cX)};};bD.Select=function(cX,cY){return bD.New(function(cZ){return cX.Subscribe(bB.observer(function(c0){cZ.OnNext(cY(c0));}));});};bD.New=function(cX){return{Subscribe:cX};};bD.Return=function(cX){return bD.New(function(cY){cY.OnNext(cX);cY.OnCompleted();return bD.NewDisposable(a.ignore);});};bD.CombineLast=function(cX,cY,cZ){return bD.New(function(c0){var c1,c2,c3,c4,c5,c6;function c7(){if(c1.length>0&&c2.length>0)c0.OnNext(cZ(c1.shift(),c2.shift()));}c1=[];c2=[];c3=bD.NewObserver(function(c8){c1.push(c8);c7();},a.ignore);c4=bD.NewObserver(function(c8){c2.push(c8);c7();},a.ignore);c5=cX.Subscribe(c3);c6=cY.Subscribe(c4);return bD.NewDisposable(function(){c5.Dispose();c6.Dispose();});});};bD.NewDisposable=function(cX){return{Dispose:function(){return cX();}};};bD.NewObserver=function(cX,cY){return{OnNext:cX,OnCompleted:function(){return cY();},OnError:function(){return null;}};};bE.SequenceOnlyNew=function(cX){var cY;cY=bF.ofSeq(cX);return cY.$==1?bE.sequence(bD.Select(cY.$0,function(cZ){return[cZ];}),cY.$1):bD.Return([]);};bE.sequence=function(cX,cY){var cZ,c0;while(true)if(cY.$==1){cZ=cY.$1;c0=cY.$0;cX=(function(c1,c2){return function(c3){return bD.CombineLast(c1,c2,function(c4,c5){return(c3(c4))(c5);});};}(cX,c0))(function(c1){return function(c2){return _0.append(c1,[c2]);};});cY=cZ;}else return cX;};bG=bF.T=cU.Class({GetEnumerator:function(){return new bx.New(this,null,function(cX){var cY;cY=cX.s;return cY.$==0?false:(cX.c=cY.$0,cX.s=cY.$1,true);},void 0);}},null,bG);bG.Empty=new bG({$:0});bF.ofArray=function(cX){var cY,cZ,c0;cY=bG.Empty;for(cZ=e.length(cX)-1,c0=0;cZ>=c0;cZ--)cY=new bG({$:1,$0:e.get(cX,cZ),$1:cY});return cY;};bF.rev=function(cX){var cY,cZ;cY=bG.Empty;cZ=cX;while(cZ.$==1){cY=new bG({$:1,$0:cZ.$0,$1:cY});cZ=cZ.$1;}return cY;};bF.ofSeq=function(cX){var cY,cZ,c0,c1,c2,c3;if(cX instanceof bG)return cX;else if(cX instanceof a.Array)return bF.ofArray(cX);else{cY=bw.Get(cX);try{c0=cY.MoveNext();if(!c0)cZ=bG.Empty;else{c2=new bG({$:1});c1=c2;while(c0){c1.$0=cY.Current();if(cY.MoveNext())c1=(c3=new bG({$:1}),c1.$1=c3,c3);else c0=false;}c1.$1=bG.Empty;cZ=c2;}return cZ;}finally{if(typeof cY=="object"&&"Dispose"in cY)cY.Dispose();}}};bF.head=function(cX){return cX.$==1?cX.$0:bF.listEmpty();};bF.tail=function(cX){return cX.$==1?cX.$1:bF.listEmpty();};bF.listEmpty=function(){return f.FailWith("The input list was empty.");};bF.iter=function(cX,cY){var cZ;cZ=cY;while(cZ.$==1){cX(bF.head(cZ));cZ=bF.tail(cZ);}};bH.$cctor=function(){bH.$cctor=a.ignore;bH.LoadedTemplates=new _7.New$5();bH.LocalTemplatesLoaded=false;bH.GlobalHoles=new _7.New$5();bH.TextHoleRE="\\${([^}]+)}";bH.RenderedFullDocTemplate=null;};bJ=bI.Event=cU.Class({Subscribe$1:function(cX){var cY;function cZ(c1,c2){return cX.OnNext(c2);}function c0(){cY.RemoveHandler$1(cZ);}cY=this;this.AddHandler$1(cZ);return{Dispose:function(){return c0();}};},AddHandler$1:function(cX){this.Handlers.push(cX);},RemoveHandler$1:function(cX){var cY,cZ;cY=_0.tryFindIndex(function(c0){return I.Equals(cX,c0);},this.Handlers);if(cY==null);else{cZ=this.Handlers;cZ.splice.apply(cZ,[cY.$0,1]);}},Dispose:a.ignore,Subscribe:function(cX){return this.Subscribe$1(cX);}},null,bJ);bJ.New=function(cX){return new bJ({Handlers:cX});};bK=d.Random=cU.Class({Next:function(cX,cY){return cX>cY?f.FailWith("'minValue' cannot be greater than maxValue."):cX+cT.floor(cT.random()*(cY-cX));}},g,bK);bK.New=cU.Ctor(function(){g.New.call(this);},bK);bL.New=function(cX,cY,cZ,c0){return{Value:cX,Color:cY,Highlight:cZ,Label:c0};};bb.Obsolete=function(cX){var cY,cZ,c0,c1,c2;cZ=cX.s;if(cZ==null||(cZ!=null&&cZ.$==2?(cY=cZ.$1,false):cZ!=null&&cZ.$==3?(cY=cZ.$1,false):true))void 0;else{cX.s=null;for(c0=0,c1=e.length(cY)-1;c0<=c1;c0++){c2=e.get(cY,c0);if(typeof c2=="object")(function(c3){bb.Obsolete(c3);}(c2));else c2();}}};bb.New=function(cX){return{s:cX};};bN.Int=function(){bN.set_counter(bN.counter()+1);return bN.counter();};bN.set_counter=function(cX){ca.$cctor();ca.counter=cX;};bN.counter=function(){ca.$cctor();return ca.counter;};bO.notPresent=function(){throw new cz.New();};bP.InMemory=function(cX){return new b4.New(cX);};bQ.New$1=function(cX,cY){return{Parse:cX,Write:cY};};bR.startsWith=function(cX,cY){var cZ;switch(cX.$==1?cY.$==1?I.Equals(cX.$0,cY.$0)?(cZ=[cY.$0,cY.$1,cX.$0,cX.$1],1):2:2:0){case 0:return{$:1,$0:cY};case 1:return bR.startsWith(cZ[3],cZ[1]);case 2:return null;}};bS=h.AttrProxy=cU.Class({},null,bS);bS.Create=function(cX,cY){return bT.Static(function(cZ){cZ.setAttribute(cX,cY);});};bS.Handler=function(cX,cY){return bS.HandlerImpl(cX,cY);};bS.Concat=function(cX){var cY;cY=cf.ofSeqNonCopying(cX);return cf.TreeReduce(bT.EmptyAttr(),bS.Append,cY);};bS.HandlerImpl=function(cX,cY){return bT.Static(function(cZ){cZ.addEventListener(cX,function(c0){return(cY(cZ))(c0);},false);});};bS.Append=function(cX,cY){return bT.AppendTree(cX,cY);};bT.Static=function(cX){return new bS({$:3,$0:cX});};bT.Insert=function(cX,cY){var cZ,c0,c1;function c2(c3){var c4,c5;while(true)if(!(c3===null)){if(c3!=null&&c3.$==1)return cZ.push(c3.$0);else if(c3!=null&&c3.$==2){c4=c3.$1;c5=c3.$0;c2(c5);c3=c4;}else return c3!=null&&c3.$==3?c3.$0(cX):c3!=null&&c3.$==4?c0.push(c3.$0):null;}else return null;}cZ=[];c0=[];c2(cY);c1=cZ.slice(0);return b$.New(cX,bT.Flags(cY),c1,c0.length===0?null:{$:1,$0:function(c3){_0.iter(function(c4){c4(c3);},c0);}});};bT.Updates=function(cX){return cf.MapTreeReduce(function(cY){return cY.NChanged();},D.Const(),D.Map2Unit,cX.DynNodes);};bT.Empty=function(cX){return b$.New(cX,0,[],null);};bT.Flags=function(cX){return cX!==null&&cX.hasOwnProperty("flags")?cX.flags:0;};bT.Dynamic=function(cX,cY){return new bS({$:1,$0:new cA.New(cX,cY)});};bT.EmptyAttr=function(){cB.$cctor();return cB.EmptyAttr;};bT.HasExitAnim=function(cX){var cY;cY=2;return(cX.DynFlags&cY)===cY;};bT.GetExitAnim=function(cX){return bT.GetAnim(cX,function(cY,cZ){return cY.NGetExitAnim(cZ);});};bT.HasEnterAnim=function(cX){var cY;cY=1;return(cX.DynFlags&cY)===cY;};bT.GetEnterAnim=function(cX){return bT.GetAnim(cX,function(cY,cZ){return cY.NGetEnterAnim(cZ);});};bT.HasChangeAnim=function(cX){var cY;cY=4;return(cX.DynFlags&cY)===cY;};bT.GetChangeAnim=function(cX){return bT.GetAnim(cX,function(cY,cZ){return cY.NGetChangeAnim(cZ);});};bT.AppendTree=function(cX,cY){var cZ;return cX===null?cY:cY===null?cX:(cZ=new bS({$:2,$0:cX,$1:cY}),(bT.SetFlags(cZ,bT.Flags(cX)|bT.Flags(cY)),cZ));};bT.GetAnim=function(cX,cY){return b1.Concat(e.map(function(cZ){return cY(cZ,cX.DynElem);},cX.DynNodes));};bT.Sync=function(cX,cY){e.iter(function(cZ){cZ.NSync(cX);},cY.DynNodes);};bT.SetFlags=function(cX,cY){cX.flags=cY;};bU.ParseHTMLIntoFakeRoot=function(cX){var cY,cZ,c0,c1,c2;function c3(c4,c5){var c6;while(true)if(c5===0)return c4;else{c6=c5;c4=c4.lastChild;c5=c6-1;}}cY=self.document.createElement("div");return!bU.rhtml().test(cX)?(cY.appendChild(self.document.createTextNode(cX)),cY):(cZ=(c0=bU.rtagName().exec(cX),I.Equals(c0,null)?"":e.get(c0,1).toLowerCase()),(c1=(c2=(bU.wrapMap())[cZ],c2?c2:bU.defaultWrap()),(cY.innerHTML=c1[1]+cX.replace(bU.rxhtmlTag(),"<$1></$2>")+c1[2],c3(cY,c1[0]))));};bU.rhtml=function(){cq.$cctor();return cq.rhtml;};bU.wrapMap=function(){cq.$cctor();return cq.wrapMap;};bU.defaultWrap=function(){cq.$cctor();return cq.defaultWrap;};bU.rxhtmlTag=function(){cq.$cctor();return cq.rxhtmlTag;};bU.rtagName=function(){cq.$cctor();return cq.rtagName;};bU.IterSelector=function(cX,cY,cZ){var c0,c1,c2;c0=cX.querySelectorAll(cY);for(c1=0,c2=c0.length-1;c1<=c2;c1++)cZ(c0[c1]);};bU.ChildrenArray=function(cX){var cY,cZ,c0;cY=[];for(cZ=0,c0=cX.childNodes.length-1;cZ<=c0;cZ++)cY.push(cX.childNodes[cZ]);return cY;};bU.IterSelectorDoc=function(cX,cY){var cZ,c0,c1;cZ=self.document.querySelectorAll(cX);for(c0=0,c1=cZ.length-1;c0<=c1;c0++)cY(cZ[c0]);};bU.InsertAt=function(cX,cY,cZ){var c0;if(!(cZ.parentNode===cX&&cY===(c0=cZ.nextSibling,I.Equals(c0,null)?null:c0)))cX.insertBefore(cZ,cY);};bU.RemoveNode=function(cX,cY){if(cY.parentNode===cX)cX.removeChild(cY);};bV.convertTextNode=function(cX){var cY,cZ,c0,c1,c2,c3;cY=null;cZ=0;c1=cX.textContent;c2=new a.RegExp(P.TextHoleRE(),"g");while(cY=c2.exec(c1),cY!==null){cX.parentNode.insertBefore(self.document.createTextNode(bz.string(c1,{$:1,$0:cZ},{$:1,$0:c2.lastIndex-e.get(cY,0).length-1})),cX);cZ=c2.lastIndex;c3=self.document.createElement("span");c3.setAttribute("ws-replace",e.get(cY,1).toLowerCase());cX.parentNode.insertBefore(c3,cX);}c2.lastIndex=0;cX.textContent=bz.string(c1,{$:1,$0:cZ},null);};bV.failNotLoaded=function(cX){cV.warn("Instantiating non-loaded template",cX);};bV.fillTextHole=function(cX,cY,cZ){var c0;c0=cX.querySelector("[ws-replace]");return I.Equals(c0,null)?(cV.warn("Filling non-existent text hole",cZ),null):(c0.parentNode.replaceChild(self.document.createTextNode(cY),c0),{$:1,$0:c0.getAttribute("ws-replace")});};bV.removeHolesExcept=function(cX,cY){function cZ(c0){P.foreachNotPreserved(cX,"["+c0+"]",function(c1){if(!cY.Contains(c1.getAttribute(c0)))c1.removeAttribute(c0);});}cZ("ws-attr");cZ("ws-onafterrender");cZ("ws-var");P.foreachNotPreserved(cX,"[ws-hole]",function(c0){if(!cY.Contains(c0.getAttribute("ws-hole"))){c0.removeAttribute("ws-hole");while(c0.hasChildNodes())c0.removeChild(c0.lastChild);}});P.foreachNotPreserved(cX,"[ws-replace]",function(c0){if(!cY.Contains(c0.getAttribute("ws-replace")))c0.parentNode.removeChild(c0);});P.foreachNotPreserved(cX,"[ws-on]",function(c0){c0.setAttribute("ws-on",b7.concat(" ",e.filter(function(c1){return cY.Contains(e.get(b7.SplitChars(c1,[":"],1),1));},b7.SplitChars(c0.getAttribute("ws-on"),[" "],1))));});P.foreachNotPreserved(cX,"[ws-attr-holes]",function(c0){var c1,c2,c3,c4,c5;c1=b7.SplitChars(c0.getAttribute("ws-attr-holes"),[" "],1);for(c2=0,c3=c1.length-1;c2<=c3;c2++){c4=e.get(c1,c2);c0.setAttribute(c4,(c5=new a.RegExp(P.TextHoleRE(),"g"),c0.getAttribute(c4).replace(c5,function(c6,c7){return cY.Contains(c7)?c6:"";})));}});};bV.fillInstanceAttrs=function(cX,cY){var cZ,c0,c1,c2,c3;bV.convertAttrs(cY);cZ=cY.nodeName.toLowerCase();c0=cX.querySelector("[ws-attr="+cZ+"]");if(I.Equals(c0,null))cV.warn("Filling non-existent attr hole",cZ);else{c0.removeAttribute("ws-attr");for(c1=0,c2=cY.attributes.length-1;c1<=c2;c1++){c3=cY.attributes.item(c1);if(c3.name=="class"&&c0.hasAttribute("class"))c0.setAttribute("class",c0.getAttribute("class")+" "+c3.nodeValue);else c0.setAttribute(c3.name,c3.nodeValue);}}};bV.mapHoles=function(cX,cY){function cZ(c0){P.foreachNotPreserved(cX,"["+c0+"]",function(c1){var c2,c3;c2=(c3=null,[cY.TryGetValue(c1.getAttribute(c0).toLowerCase(),{get:function(){return c3;},set:function(c4){c3=c4;}}),c3]);if(c2[0])c1.setAttribute(c0,c2[1]);});}cZ("ws-hole");cZ("ws-replace");cZ("ws-attr");cZ("ws-onafterrender");cZ("ws-var");P.foreachNotPreserved(cX,"[ws-on]",function(c0){c0.setAttribute("ws-on",b7.concat(" ",e.map(function(c1){var c2,c3,c4;c2=b7.SplitChars(c1,[":"],1);c3=(c4=null,[cY.TryGetValue(e.get(c2,1),{get:function(){return c4;},set:function(c5){c4=c5;}}),c4]);return c3[0]?e.get(c2,0)+":"+c3[1]:c1;},b7.SplitChars(c0.getAttribute("ws-on"),[" "],1))));});P.foreachNotPreserved(cX,"[ws-attr-holes]",function(c0){var c1,c2,c3;c1=b7.SplitChars(c0.getAttribute("ws-attr-holes"),[" "],1);for(c2=0,c3=c1.length-1;c2<=c3;c2++)(function(){var c4;function c5(c6,c7){var c8;c8=f.KeyValue(c7);return c6.replace(new a.RegExp("\\${"+c8[0]+"}","ig"),"${"+c8[1]+"}");}c4=e.get(c1,c2);return c0.setAttribute(c4,(((cU.Curried3(_0.fold))(c5))(c0.getAttribute(c4)))(cY));}());});};bV.fill=function(cX,cY,cZ){while(true)if(cX.hasChildNodes())cZ=cY.insertBefore(cX.lastChild,cZ);else return null;};bV.convertAttrs=function(cX){var cZ,c0,c1,c2,c3,c4,c5,c6;function cY(c7){var c8;c8=cX.getAttribute(c7);if(c8==null);else cX.setAttribute(c7,c8.toLowerCase());}cZ=cX.attributes;c0=[];c1=[];c2=[];for(c3=0,c4=cZ.length-1;c3<=c4;c3++){c5=cZ.item(c3);if(b7.StartsWith(c5.nodeName,"ws-on")&&c5.nodeName!="ws-onafterrender"&&c5.nodeName!="ws-on"){c0.push(c5.nodeName);c1.push(bz.string(c5.nodeName,{$:1,$0:"ws-on".length},null)+":"+c5.nodeValue.toLowerCase());}else!b7.StartsWith(c5.nodeName,"ws-")&&(new a.RegExp(P.TextHoleRE())).test(c5.nodeValue)?(c5.nodeValue=(c6=new a.RegExp(P.TextHoleRE(),"g"),c5.nodeValue.replace(c6,function(c7,c8){return"${"+c8.toLowerCase()+"}";})),c2.push(c5.nodeName)):void 0;}if(!(c1.length==0))cX.setAttribute("ws-on",b7.concat(" ",c1));if(!(c2.length==0))cX.setAttribute("ws-attr-holes",b7.concat(" ",c2));cY("ws-hole");cY("ws-replace");cY("ws-attr");cY("ws-onafterrender");cY("ws-var");e.iter(function(c7){cX.removeAttribute(c7);},c0);};_0.insufficient=function(){return f.FailWith("The input sequence has an insufficient number of elements.");};_0.nonNegative=function(){return f.FailWith("The input must be non-negative.");};e.mapiInPlace=function(cX,cY){var cZ,c0;for(cZ=0,c0=cY.length-1;cZ<=c0;cZ++)cY[cZ]=cX(cZ,cY[cZ]);return cY;};e.mapInPlace=function(cX,cY){var cZ,c0;for(cZ=0,c0=cY.length-1;cZ<=c0;cZ++)cY[cZ]=cX(cY[cZ]);};bW=_6.KeyCollection=cU.Class({GetEnumerator:function(){return bw.Get(_0.map(function(cX){return cX.K;},this.d));}},g,bW);bW.New=cU.Ctor(function(cX){g.New.call(this);this.d=cX;},bW);bX=h.DocElemNode=cU.Class({Equals:function(cX){return this.ElKey===cX.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bX);bX.New=function(cX,cY,cZ,c0,c1,c2){var c3;return new bX((c3={Attr:cX,Children:cY,El:c0,ElKey:c1},(cU.SetOptional(c3,"Delimiters",cZ),cU.SetOptional(c3,"Render",c2),c3)));};b0=h.Elt=cU.Class({},Q,b0);b0.TreeNode=function(cX,cY){var cZ,c0;function c1(c2,c3){return bT.Updates(c3);}cZ=cg.Create(cY);return new b0.New$1({$:6,$0:cX},D.Map2Unit((c0=e.map(function(c2){return c1(c2[0],c2[1]);},cX.Attrs),cf.TreeReduce(D.Const(),D.Map2Unit,c0)),cZ.v),e.get(cX.Els,0),cZ);};b0.New=function(cX,cY,cZ){var c0,c1;c0=bf.CreateElemNode(cX,cY,cZ.docNode);c1=cg.Create(cZ.updates);return new b0.New$1({$:1,$0:c0},D.Map2Unit(bT.Updates(c0.Attr),c1.v),cX,c1);};b0.New$1=cU.Ctor(function(cX,cY,cZ,c0){Q.New.call(this,cX,cY);this.docNode$1=cX;this.updates$1=cY;this.elt=cZ;this.rvUpdates=c0;},b0);b1.get_UseAnimations=function(){return cl.UseAnimations();};b1.Play=function(cX){var cY;cY=null;return b9.Delay(function(){return b9.Bind(b1.Run(a.ignore,cl.Actions(cX)),function(){cl.Finalize(cX);return b9.Return(null);});});};b1.Append=function(cX,cY){return{$:0,$0:cu.Append(cX.$0,cY.$0)};};b1.Run=function(cX,cY){var cZ;function c0(c1){function c2(c3){return function(c4){var c5;c5=c4-c3;cY.Compute(c5);cX();return c5<=cZ?void a.requestAnimationFrame(function(c6){(c2(c3))(c6);}):c1();};}a.requestAnimationFrame(function(c3){(c2(c3))(c3);});}cZ=cY.Duration;return cZ===0?b9.Zero():b9.FromContinuations(function(c1,c2,c3){return c0.apply(null,[c1,c2,c3]);});};b1.Concat=function(cX){return{$:0,$0:cu.Concat(_0.map(cl.List,cX))};};b1.get_Empty=function(){return{$:0,$0:cu.Empty()};};b2.BatchUpdatesEnabled=function(){cm.$cctor();return cm.BatchUpdatesEnabled;};b3.StartProcessor=function(cX){var cY;function cZ(){var c0;c0=null;return b9.Delay(function(){return b9.Bind(cX,function(){var c1;c1=cY[0];return I.Equals(c1,1)?(cY[0]=0,b9.Zero()):I.Equals(c1,2)?(cY[0]=1,cZ()):b9.Zero();});});}cY=[0];return function(){var c0;c0=cY[0];if(I.Equals(c0,0)){cY[0]=1;b9.Start(cZ(),null);}else I.Equals(c0,1)?cY[0]=2:void 0;};};b4=bP.ArrayStorage=cU.Class({SSetAt:function(cX,cY,cZ){e.set(cZ,cX,cY);return cZ;},SAppend:function(cX,cY){cY.push(cX);return cY;},SInit:function(){return this.init;}},g,b4);b4.New=cU.Ctor(function(cX){g.New.call(this);this.init=cX;},b4);b5=_6.FSharpMap=cU.Class({Equals:function(cX){return this.Count()===cX.Count()&&_0.forall2(I.Equals,this,cX);},GetEnumerator:function(){return bw.Get(_0.map(function(cX){return{K:cX.Key,V:cX.Value};},cn.Enumerate(false,this.tree)));},Count:function(){var cX;cX=this.tree;return cX==null?0:cX.Count;},GetHashCode:function(){return I.Hash(e.ofSeq(this));},Add$1:function(cX,cY){return new b5.New$1(cn.Add(cp.New(cX,cY),this.tree));},get_IsEmpty:function(){return this.tree==null;},get_Tree:function(){return this.tree;},CompareTo0:function(cX){return _0.compareWith(I.Compare,this,cX);}},g,b5);b5.New=cU.Ctor(function(cX){b5.New$1.call(this,cv.fromSeq(cX));},b5);b5.New$1=cU.Ctor(function(cX){g.New.call(this);this.tree=cX;},b5);b6.OfArray=function(cX){return new b5.New$1(cn.OfSeq(_0.map(function(cY){return cp.New(cY[0],cY[1]);},cX)));};b6.FoldBack=function(cX,cY,cZ){return _0.fold(function(c0,c1){return cX(c1.Key,c1.Value,c0);},cZ,cn.Enumerate(true,cY.get_Tree()));};b6.ToSeq=function(cX){return _0.map(function(cY){return[cY.Key,cY.Value];},cn.Enumerate(false,cX.get_Tree()));};b7.StartsWith=function(cX,cY){return cX.substring(0,cY.length)==cY;};b7.concat=function(cX,cY){return e.ofSeq(cY).join(cX);};b7.SplitChars=function(cX,cY,cZ){return b7.Split(cX,new a.RegExp("["+b7.RegexEscape(cY.join(""))+"]"),cZ);};b7.Substring=function(cX,cY,cZ){return cX.substr(cY,cZ);};b7.Split=function(cX,cY,cZ){return cZ===1?e.filter(function(c0){return c0!=="";},b7.SplitWith(cX,cY)):b7.SplitWith(cX,cY);};b7.RegexEscape=function(cX){return cX.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};b7.SplitWith=function(cX,cY){return cX.split(cY);};b7.forall=function(cX,cY){return _0.forall(cX,b7.protect(cY));};b7.IsNullOrEmpty=function(cX){return cX==null||cX=="";};b7.Join=function(cX,cY){return cY.join(cX);};b7.protect=function(cX){return cX==null?"":cX;};b8.toSafe=function(cX){return cX==null?"":cX;};b9.Delay=function(cX){return function(cY){try{(cX(null))(cY);}catch(cZ){cY.k({$:1,$0:cZ});}};};b9.Bind=function(cX,cY){return b9.checkCancel(function(cZ){cX(cD.New(function(c0){var c1;if(c0.$==0){c1=c0.$0;b9.scheduler().Fork(function(){try{(cY(c1))(cZ);}catch(c2){cZ.k({$:1,$0:c2});}});}else b9.scheduler().Fork(function(){cZ.k(c0);});},cZ.ct));});};b9.Zero=function(){cE.$cctor();return cE.Zero;};b9.Start=function(cX,cY){var cZ,c0;cZ=(c0=(b9.defCTS())[0],cY==null?c0:cY.$0);b9.scheduler().Fork(function(){if(!cZ.c)cX(cD.New(function(c1){if(c1.$==1)b9.UncaughtAsyncError(c1.$0);},cZ));});};b9.Return=function(cX){return function(cY){cY.k({$:0,$0:cX});};};b9.scheduler=function(){cE.$cctor();return cE.scheduler;};b9.checkCancel=function(cX){return function(cY){if(cY.ct.c)b9.cancel(cY);else cX(cY);};};b9.defCTS=function(){cE.$cctor();return cE.defCTS;};b9.UncaughtAsyncError=function(cX){cV.log("WebSharper: Uncaught asynchronous exception",cX);};b9.FromContinuations=function(cX){return function(cY){var cZ;function c0(c1){if(cZ[0])f.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{cZ[0]=true;b9.scheduler().Fork(c1);}}cZ=[false];cX(function(c1){c0(function(){cY.k({$:0,$0:c1});});},function(c1){c0(function(){cY.k({$:1,$0:c1});});},function(c1){c0(function(){cY.k({$:2,$0:c1});});});};};b9.cancel=function(cX){cX.k({$:2,$0:new cO.New(cX.ct)});};b$.New=function(cX,cY,cZ,c0){var c1;c1={DynElem:cX,DynFlags:cY,DynNodes:cZ};cU.SetOptional(c1,"OnAfterRender",c0);return c1;};ca.$cctor=function(){ca.$cctor=a.ignore;ca.counter=0;};cb=F.Attribute=cU.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},m,cb);cc=F.Event=cU.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},m,cc);cd=F.AfterRender=cU.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},m,cd);ce=F.AfterRenderQ=cU.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},m,ce);cf.TreeReduce=function(cX,cY,cZ){var c0;function c1(c2){return function(c3){var c4,c5;switch(c3<=0?0:c3===1?c2>=0&&c2<c0?1:(c4=c3,2):(c4=c3,2)){case 0:return cX;case 1:return e.get(cZ,c2);case 2:c5=c3/2>>0;return cY((c1(c2))(c5),(c1(c2+c5))(c3-c5));}};}c0=e.length(cZ);return(c1(0))(c0);};cf.mapInPlace=function(cX,cY){var cZ,c0;for(cZ=0,c0=cY.length-1;cZ<=c0;cZ++)cY[cZ]=cX(cY[cZ]);return cY;};cf.ofSeqNonCopying=function(cX){var cY,cZ;if(cX instanceof a.Array)return cX;else if(cX instanceof bG)return e.ofList(cX);else if(cX===null)return[];else{cY=[];cZ=bw.Get(cX);try{while(cZ.MoveNext())cY.push(cZ.Current());return cY;}finally{if(typeof cZ=="object"&&"Dispose"in cZ)cZ.Dispose();}}};cf.MapTreeReduce=function(cX,cY,cZ,c0){var c1;function c2(c3){return function(c4){var c5,c6;switch(c4<=0?0:c4===1?c3>=0&&c3<c1?1:(c5=c4,2):(c5=c4,2)){case 0:return cY;case 1:return cX(e.get(c0,c3));case 2:c6=c4/2>>0;return cZ((c2(c3))(c6),(c2(c3+c6))(c4-c6));}};}c1=e.length(c0);return(c2(0))(c1);};cg=h.Updates=cU.Class({},null,cg);cg.Create=function(cX){var cY;cY=null;cY=cg.New(cX,null,function(){var cZ;cZ=cY.s;return cZ===null?(cZ=bb.Copy(cY.c()),cY.s=cZ,bb.WhenObsoleteRun(cZ,function(){cY.s=null;}),cZ):cZ;});return cY;};cg.New=function(cX,cY,cZ){return new cg({c:cX,s:cY,v:cZ});};ch=_6.ValueCollection=cU.Class({GetEnumerator:function(){return bw.Get(_0.map(function(cX){return cX.V;},this.d));}},g,ch);ch.New=cU.Ctor(function(cX){g.New.call(this);this.d=cX;},ch);cj.New=function(cX,cY){return{PreviousNodes:cX,Top:cY};};ck.get_Empty=function(){return{$:0,$0:new bg.New$3()};};ck.FindAll=function(cX){var cY;function cZ(c2,c3){var c4,c5,c6,c7,c8;while(true)switch(c2){case 0:if(c3!=null&&c3.$==0){c5=c3.$1;c6=c3.$0;cZ(0,c6);c3=c5;}else if(c3!=null&&c3.$==1){c7=c3.$0;c3=c7;c2=1;}else if(c3!=null&&c3.$==2){c8=c3.$0;c3=c8.Current;}else return c3!=null&&c3.$==6?(c4=c3.$0.Holes,(function(c9){return function(c_){e.iter(c9,c_);};}(c1))(c4)):null;break;case 1:cY.push(c3);c3=c3.Children;c2=0;break;}}function c0(c2){return cZ(0,c2);}function c1(c2){return cZ(1,c2);}cY=[];c0(cX);return{$:0,$0:new bg.New$2(cY)};};ck.Filter=function(cX,cY){return{$:0,$0:cG.Filter(cX,cY.$0)};};ck.Except=function(cX,cY){return{$:0,$0:cG.Except(cX.$0,cY.$0)};};ck.ToArray=function(cX){return cG.ToArray(cX.$0);};ck.Intersect=function(cX,cY){return{$:0,$0:cG.Intersect(cX.$0,cY.$0)};};cl.UseAnimations=function(){ct.$cctor();return ct.UseAnimations;};cl.Actions=function(cX){return cl.ConcatActions(e.choose(function(cY){return cY.$==1?{$:1,$0:cY.$0}:null;},cu.ToArray(cX.$0)));};cl.Finalize=function(cX){e.iter(function(cY){if(cY.$==0)cY.$0();},cu.ToArray(cX.$0));};cl.ConcatActions=function(cX){var cY,cZ,c0,c1;cY=cf.ofSeqNonCopying(cX);cZ=e.length(cY);return cZ===0?cl.Const():cZ===1?e.get(cY,0):(c0=_0.max(_0.map(function(c2){return c2.Duration;},cY)),(c1=e.map(function(c2){return cl.Prolong(c0,c2);},cY),cl.Def(c0,function(c2){e.iter(function(c3){c3.Compute(c2);},c1);})));};cl.List=function(cX){return cX.$0;};cl.Const=function(cX){return cl.Def(0,function(){return cX;});};cl.Def=function(cX,cY){return{Compute:cY,Duration:cX};};cl.Prolong=function(cX,cY){var cZ,c0,c1;cZ=cY.Compute;c0=cY.Duration;c1=cP.Create(function(){return cY.Compute(cY.Duration);});return{Compute:function(c2){return c2>=c0?c1.f():cZ(c2);},Duration:cX};};cm.$cctor=function(){cm.$cctor=a.ignore;cm.BatchUpdatesEnabled=true;};co.New=function(cX,cY,cZ,c0,c1){return{Node:cX,Left:cY,Right:cZ,Height:c0,Count:c1};};cp=_6.Pair=cU.Class({Equals:function(cX){return I.Equals(this.Key,cX.Key);},GetHashCode:function(){return I.Hash(this.Key);},CompareTo0:function(cX){return I.Compare(this.Key,cX.Key);}},null,cp);cp.New=function(cX,cY){return new cp({Key:cX,Value:cY});};cq.$cctor=function(){var cX;cq.$cctor=a.ignore;cq.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");cq.rtagName=new a.RegExp("<([\\w:]+)");cq.rhtml=new a.RegExp("<|&#?\\w+;");cq.wrapMap=(cX=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:cX,tbody:cX,tfoot:cX,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});cq.defaultWrap=[0,"",""];};cr.Clear=function(cX){cX.splice(0,e.length(cX));};cs.concat=function(cX){var cY,cZ;cY=[];for(var c0 in cX)cY.push.apply(cY,cX[c0]);return cY;};ct.$cctor=function(){ct.$cctor=a.ignore;ct.CubicInOut=cC.Custom(function(cX){var cY;cY=cX*cX;return 3*cY-2*(cY*cX);});ct.UseAnimations=true;};cu.Append=function(cX,cY){return cX.$==0?cY:cY.$==0?cX:{$:2,$0:cX,$1:cY};};cu.ToArray=function(cX){var cY;function cZ(c0){var c1,c2;while(true)if(c0.$==1)return cY.push(c0.$0);else if(c0.$==2){c1=c0.$1;c2=c0.$0;cZ(c2);c0=c1;}else return c0.$==3?e.iter(function(c3){cY.push(c3);},c0.$0):null;}cY=[];cZ(cX);return cY.slice(0);};cu.Concat=function(cX){var cY;cY=cf.ofSeqNonCopying(cX);return cf.TreeReduce(cu.Empty(),cu.Append,cY);};cu.Empty=function(){cQ.$cctor();return cQ.Empty;};cv.fromSeq=function(cX){var cY;cY=e.ofSeq(_0.map(function(cZ){return cp.New(cZ[0],cZ[1]);},_0.distinctBy(function(cZ){return cZ[0];},_0.rev(cX))));e.sortInPlace(cY);return cn.Build(cY,0,cY.length-1);};cw=b9.Scheduler=cU.Class({Fork:function(cX){var cY;cY=this;this.robin.push(cX);if(this.idle){this.idle=false;a.setTimeout(function(){cY.tick();},0);}},tick:function(){var cX,cY,cZ;cY=this;cZ=cW.now();cX=true;while(cX)if(this.robin.length===0){this.idle=true;cX=false;}else{(this.robin.shift())();cW.now()-cZ>40?(a.setTimeout(function(){cY.tick();},0),cX=false):void 0;}}},g,cw);cw.New=cU.Ctor(function(){g.New.call(this);this.idle=true;this.robin=[];},cw);cx.WriteLink=function(cX,cY){var cZ;cZ=cY.get_IsEmpty()?"":"?"+cx.WriteQuery(cY);return"/"+cx.Concat(cX)+cZ;};cx.Concat=function(cX){var cY,cZ;cY=[];cZ=true;bF.iter(function(c0){if(!b7.IsNullOrEmpty(c0)){cZ?cZ=false:cY.push("/");cY.push(c0);}},cX);return b7.Join("",e.ofSeq(cY));};cx.WriteQuery=function(cX){function cY(cZ,c0){return cZ+"="+c0;}return b7.concat("&",_0.map(function(cZ){return cY(cZ[0],cZ[1]);},b6.ToSeq(cX)));};cz=d.KeyNotFoundException=cU.Class({},cy,cz);cz.New=cU.Ctor(function(){cz.New$1.call(this,"The given key was not present in the dictionary.");},cz);cz.New$1=cU.Ctor(function(cX){this.message=cX;T.setPrototypeOf(this,cz.prototype);},cz);cn.OfSeq=function(cX){var cY;cY=e.ofSeq(_0.distinct(cX));e.sortInPlace(cY);return cn.Build(cY,0,cY.length-1);};cn.Enumerate=function(cX,cY){function cZ(c0,c1){var c2;while(true)if(c0==null)return c1.$==1?{$:1,$0:[c1.$0[0],[c1.$0[1],c1.$1]]}:null;else if(cX){c2=c0;c0=c2.Right;c1=new bG({$:1,$0:[c2.Node,c2.Left],$1:c1});}else{c2=c0;c0=c2.Left;c1=new bG({$:1,$0:[c2.Node,c2.Right],$1:c1});}}return _0.unfold(function(c0){return cZ(c0[0],c0[1]);},[cY,bG.Empty]);};cn.Build=function(cX,cY,cZ){var c0,c1,c2;return cZ-cY+1<=0?null:(c0=(cY+cZ)/2>>0,(c1=cn.Build(cX,cY,c0-1),(c2=cn.Build(cX,c0+1,cZ),cn.Branch(e.get(cX,c0),c1,c2))));};cn.Branch=function(cX,cY,cZ){var c0,c1;return co.New(cX,cY,cZ,1+(c0=cY==null?0:cY.Height,(c1=cZ==null?0:cZ.Height,I.Compare(c0,c1)===1?c0:c1)),1+(cY==null?0:cY.Count)+(cZ==null?0:cZ.Count));};cn.Add=function(cX,cY){return cn.Put(function(cZ,c0){return c0;},cX,cY);};cn.Put=function(cX,cY,cZ){var c0,c1;c0=cn.Lookup(cY,cZ);c1=c0[0];return c1==null?cn.Rebuild(c0[1],cn.Branch(cY,null,null)):cn.Rebuild(c0[1],cn.Branch(cX(c1.Node,cY),c1.Left,c1.Right));};cn.Lookup=function(cX,cY){var cZ,c0,c1,c2;cZ=[];c0=cY;c1=true;while(c1)if(c0==null)c1=false;else{c2=I.Compare(cX,c0.Node);if(c2===0)c1=false;else c2===1?(cZ.unshift([true,c0.Node,c0.Left]),c0=c0.Right):(cZ.unshift([false,c0.Node,c0.Right]),c0=c0.Left);}return[c0,cZ];};cn.Rebuild=function(cX,cY){var cZ,c1,c2,c3,c4,c5,c6,c7,c8,c9;function c0(c_){return c_==null?0:c_.Height;}cZ=cY;for(c1=0,c2=e.length(cX)-1;c1<=c2;c1++){cZ=(c3=e.get(cX,c1),c3[0]?(c4=c3[1],(c5=c3[2],c0(cZ)>c0(c5)+1?c0(cZ.Left)===c0(cZ.Right)+1?(c6=cZ.Left,cn.Branch(c6.Node,cn.Branch(c4,c5,c6.Left),cn.Branch(cZ.Node,c6.Right,cZ.Right))):cn.Branch(cZ.Node,cn.Branch(c4,c5,cZ.Left),cZ.Right):cn.Branch(c4,c5,cZ))):(c7=c3[1],(c8=c3[2],c0(cZ)>c0(c8)+1?c0(cZ.Right)===c0(cZ.Left)+1?(c9=cZ.Right,cn.Branch(c9.Node,cn.Branch(cZ.Node,cZ.Left,c9.Left),cn.Branch(c7,c9.Right,c8))):cn.Branch(cZ.Node,cZ.Left,cn.Branch(c7,cZ.Right,c8)):cn.Branch(c7,cZ,c8))));}return cZ;};cA=h.DynamicAttrNode=cU.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(cX){return b1.get_Empty();},NGetEnterAnim:function(cX){return b1.get_Empty();},NGetChangeAnim:function(cX){return b1.get_Empty();},NSync:function(cX){if(this.dirty){(this.push(cX))(this.value);this.dirty=false;}}},g,cA);cA.New=cU.Ctor(function(cX,cY){var cZ;cZ=this;g.New.call(this);this.push=cY;this.value=void 0;this.dirty=false;this.updates=D.Map(function(c0){cZ.value=c0;cZ.dirty=true;},cX);},cA);cB.$cctor=function(){var cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_;cB.$cctor=a.ignore;cB.EmptyAttr=null;cB.BoolCheckedApply=function(c$){function da(db,dc){return dc!=null&&dc.$==1?void(db.checked=dc.$0):null;}return[function(db){db.addEventListener("change",function(){return c$.Get()!=db.checked?c$.Set(db.checked):null;});},function(db){return function(dc){return da(db,dc);};},D.Map(function(db){return{$:1,$0:db};},c$.get_View())];};cB.StringSet=function(c$){return function(da){c$.value=da;};};cB.StringGet=function(c$){return{$:1,$0:c$.value};};cB.StringApply=(cX=cH.StringGet(),(cY=cH.StringSet(),function(c$){return cH.ApplyValue(cX,cY,c$);}));cB.DateTimeSetUnchecked=function(c$){return function(da){c$.value=(new cW(da)).toLocaleString();};};cB.DateTimeGetUnchecked=function(c$){var da,db,dc,dd;da=c$.value;return cI.isBlank(da)?{$:1,$0:-8640000000000000}:(db=(dc=0,[(dd=cN.TryParse(da),dd!=null&&dd.$==1&&(dc=dd.$0,true)),dc]),db[0]?{$:1,$0:db[1]}:null);};cB.DateTimeApplyUnchecked=(cZ=cH.DateTimeGetUnchecked(),(c0=cH.DateTimeSetUnchecked(),function(c$){return cH.ApplyValue(cZ,c0,c$);}));cB.FileSetUnchecked=function(){return function(){return null;};};cB.FileGetUnchecked=function(c$){var da;da=c$.files;return{$:1,$0:e.ofSeq(_0.delay(function(){return _0.map(function(db){return da.item(db);},f.range(0,da.length-1));}))};};cB.FileApplyUnchecked=(c1=cH.FileGetUnchecked(),(c2=cH.FileSetUnchecked(),function(c$){return cH.FileApplyValue(c1,c2,c$);}));cB.IntSetUnchecked=function(c$){return function(da){c$.value=a.String(da);};};cB.IntGetUnchecked=function(c$){var da,db;da=c$.value;return cI.isBlank(da)?{$:1,$0:0}:(db=+da,db!==db>>0?null:{$:1,$0:db});};cB.IntApplyUnchecked=(c3=cH.IntGetUnchecked(),(c4=cH.IntSetUnchecked(),function(c$){return cH.ApplyValue(c3,c4,c$);}));cB.IntSetChecked=function(c$){return function(da){var db;db=da.get_Input();return c$.value!=db?void(c$.value=db):null;};};cB.IntGetChecked=function(c$){var da,db,dc;da=c$.value;return{$:1,$0:cI.isBlank(da)?(c$.checkValidity?c$.checkValidity():true)?new cJ({$:2,$0:da}):new cJ({$:1,$0:da}):(db=(dc=0,[U.TryParseInt32(da,{get:function(){return dc;},set:function(dd){dc=dd;}}),dc]),db[0]?new cJ({$:0,$0:db[1],$1:da}):new cJ({$:1,$0:da}))};};cB.IntApplyChecked=(c5=cH.IntGetChecked(),(c6=cH.IntSetChecked(),function(c$){return cH.ApplyValue(c5,c6,c$);}));cB.FloatSetUnchecked=function(c$){return function(da){c$.value=a.String(da);};};cB.FloatGetUnchecked=function(c$){var da,db;da=c$.value;return cI.isBlank(da)?{$:1,$0:0}:(db=+da,a.isNaN(db)?null:{$:1,$0:db});};cB.FloatApplyUnchecked=(c7=cH.FloatGetUnchecked(),(c8=cH.FloatSetUnchecked(),function(c$){return cH.ApplyValue(c7,c8,c$);}));cB.FloatSetChecked=function(c$){return function(da){var db;db=da.get_Input();return c$.value!=db?void(c$.value=db):null;};};cB.FloatGetChecked=function(c$){var da,db;da=c$.value;return{$:1,$0:cI.isBlank(da)?(c$.checkValidity?c$.checkValidity():true)?new cJ({$:2,$0:da}):new cJ({$:1,$0:da}):(db=+da,a.isNaN(db)?new cJ({$:1,$0:da}):new cJ({$:0,$0:db,$1:da}))};};cB.FloatApplyChecked=(c9=cH.FloatGetChecked(),(c_=cH.FloatSetChecked(),function(c$){return cH.ApplyValue(c9,c_,c$);}));};cC=h.Easing=cU.Class({},g,cC);cC.Custom=function(cX){return new cC.New(cX);};cC.New=cU.Ctor(function(cX){g.New.call(this);this.transformTime=cX;},cC);cD.New=function(cX,cY){return{k:cX,ct:cY};};cE.$cctor=function(){cE.$cctor=a.ignore;cE.noneCT=cF.New(false,[]);cE.scheduler=new cw.New();cE.defCTS=[new cK.New()];cE.Zero=b9.Return();cE.GetCT=function(cX){cX.k({$:0,$0:cX.ct});};};cF.New=function(cX,cY){return{c:cX,r:cY};};cG.Filter=function(cX,cY){return new bg.New$2(e.filter(cX,cG.ToArray(cY)));};cG.Except=function(cX,cY){var cZ;cZ=new bg.New$2(cG.ToArray(cY));cZ.ExceptWith(cG.ToArray(cX));return cZ;};cG.ToArray=function(cX){var cY;cY=e.create(cX.Count(),void 0);cX.CopyTo(cY,0);return cY;};cG.Intersect=function(cX,cY){var cZ;cZ=new bg.New$2(cG.ToArray(cX));cZ.IntersectWith(cG.ToArray(cY));return cZ;};cH.ApplyValue=function(cX,cY,cZ){var c0;function c1(c2,c3){return c3==null?null:c2(c3.$0);}c0=null;return[function(c2){function c3(){cZ.UpdateMaybe(function(c4){var c5;c0=cX(c2);return c0!=null&&c0.$==1&&(!I.Equals(c0.$0,c4)&&(c5=[c0,c0.$0],true))?c5[0]:null;});}c2.addEventListener("change",c3);c2.addEventListener("input",c3);c2.addEventListener("keypress",c3);},function(c2){var c3;c3=cY(c2);return function(c4){return c1(c3,c4);};},D.Map(function(c2){var c3;return c0!=null&&c0.$==1&&(I.Equals(c0.$0,c2)&&(c3=c0.$0,true))?null:{$:1,$0:c2};},cZ.get_View())];};cH.StringSet=function(){cB.$cctor();return cB.StringSet;};cH.StringGet=function(){cB.$cctor();return cB.StringGet;};cH.DateTimeSetUnchecked=function(){cB.$cctor();return cB.DateTimeSetUnchecked;};cH.DateTimeGetUnchecked=function(){cB.$cctor();return cB.DateTimeGetUnchecked;};cH.FileApplyValue=function(cX,cY,cZ){var c0;function c1(c2,c3){return c3==null?null:c2(c3.$0);}c0=null;return[function(c2){c2.addEventListener("change",function(){cZ.UpdateMaybe(function(c3){var c4;c0=cX(c2);return c0!=null&&c0.$==1&&(c0.$0!==c3&&(c4=[c0,c0.$0],true))?c4[0]:null;});});},function(c2){var c3;c3=cY(c2);return function(c4){return c1(c3,c4);};},D.Map(function(c2){var c3;return c0!=null&&c0.$==1&&(I.Equals(c0.$0,c2)&&(c3=c0.$0,true))?null:{$:1,$0:c2};},cZ.get_View())];};cH.FileSetUnchecked=function(){cB.$cctor();return cB.FileSetUnchecked;};cH.FileGetUnchecked=function(){cB.$cctor();return cB.FileGetUnchecked;};cH.IntSetUnchecked=function(){cB.$cctor();return cB.IntSetUnchecked;};cH.IntGetUnchecked=function(){cB.$cctor();return cB.IntGetUnchecked;};cH.IntSetChecked=function(){cB.$cctor();return cB.IntSetChecked;};cH.IntGetChecked=function(){cB.$cctor();return cB.IntGetChecked;};cH.FloatSetUnchecked=function(){cB.$cctor();return cB.FloatSetUnchecked;};cH.FloatGetUnchecked=function(){cB.$cctor();return cB.FloatGetUnchecked;};cH.FloatSetChecked=function(){cB.$cctor();return cB.FloatSetChecked;};cH.FloatGetChecked=function(){cB.$cctor();return cB.FloatGetChecked;};cH.StringApply=function(){cB.$cctor();return cB.StringApply;};cH.FloatApplyUnchecked=function(){cB.$cctor();return cB.FloatApplyUnchecked;};cH.BoolCheckedApply=function(){cB.$cctor();return cB.BoolCheckedApply;};cH.DateTimeApplyUnchecked=function(){cB.$cctor();return cB.DateTimeApplyUnchecked;};cH.FileApplyUnchecked=function(){cB.$cctor();return cB.FileApplyUnchecked;};cI.isBlank=function(cX){return b7.forall(cM.IsWhiteSpace,cX);};cJ=h.CheckedInput=cU.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,cJ);cK=d.CancellationTokenSource=cU.Class({},g,cK);cK.New=cU.Ctor(function(){g.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},cK);cL.Children=function(cX,cY){var cZ,c0,c1;if(cY!=null&&cY.$==1){c1=[];cZ=cY.$0[0].nextSibling;while(cZ!==cY.$0[1]){c1.push(cZ);cZ=cZ.nextSibling;}return{$:0,$0:c1};}else return{$:0,$0:e.init(cX.childNodes.length,(c0=cX.childNodes,function(c2){return c0[c2];}))};};cL.Except=function(cX,cY){var cZ;cZ=cX.$0;return{$:0,$0:e.filter(function(c0){return e.forall(function(c1){return!(c0===c1);},cZ);},cY.$0)};};cL.Iter=function(cX,cY){e.iter(cX,cY.$0);};cL.DocChildren=function(cX){var cY;function cZ(c0){var c1,c2,c3,c4;while(true){if(c0!=null&&c0.$==2){c2=c0.$0;c0=c2.Current;}else if(c0!=null&&c0.$==1)return cY.push(c0.$0.El);else if(c0==null)return null;else if(c0!=null&&c0.$==5)return cY.push(c0.$0);else if(c0!=null&&c0.$==4)return cY.push(c0.$0.Text);else if(c0!=null&&c0.$==6){c1=c0.$0.Els;return(function(c5){return function(c6){e.iter(c5,c6);};}(function(c5){if(c5==null||c5.constructor===T)cZ(c5);else cY.push(c5);}))(c1);}else{c3=c0.$1;c4=c0.$0;cZ(c4);c0=c3;}}}cY=[];cZ(cX.Children);return{$:0,$0:cf.ofSeqNonCopying(cY)};};cM.IsWhiteSpace=function(cX){return cX.match(new a.RegExp("\\s"))!==null;};cN.TryParse=function(cX){var cY;cY=cW.parse(cX);return a.isNaN(cY)?null:{$:1,$0:cY};};U.TryParse=function(cX,cY,cZ,c0){var c1,c2;c1=+cX;c2=c1===c1-c1%1&&c1>=cY&&c1<=cZ;if(c2)c0.set(c1);return c2;};cO=d.OperationCanceledException=cU.Class({},cy,cO);cO.New=cU.Ctor(function(cX){cO.New$1.call(this,"The operation was canceled.",null,cX);},cO);cO.New$1=cU.Ctor(function(cX,cY,cZ){this.message=cX;this.inner=cY;T.setPrototypeOf(this,cO.prototype);this.ct=cZ;},cO);cP.Create=function(cX){return cS.New(false,cX,cP.forceLazy);};cP.forceLazy=function(){var cX;cX=this.v();this.c=true;this.v=cX;this.f=cP.cachedLazy;return cX;};cP.cachedLazy=function(){return this.v;};cQ.$cctor=function(){cQ.$cctor=a.ignore;cQ.Empty={$:0};};cS.New=function(cX,cY,cZ){return{c:cX,v:cY,f:cZ};};cU.OnLoad(function(){c.Main();});}(self));


if (typeof WebSharper !=='undefined') {
  WebSharper.Runtime.ScriptBasePath = '/Content/';
  WebSharper.Runtime.Start();
}
